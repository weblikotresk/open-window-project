function snowCheck(e,t){return null==e.precipType&&"fog"==e.icon&&(e.summary.includes("Туман")||e.summary.includes("туман")||e.summary.includes("Fog")||e.summary.includes("fog"))?"cloudy":!!((t.includes("hourly")||t.includes("daily")||t.includes("currently"))&&"snow"==e.precipType&&(e.summary.includes("Туман")||e.summary.includes("туман")||e.summary.includes("Fog")||e.summary.includes("fog"))&&100*e.humidity<99)||!("hourlysumm"!=t&&"dailysumm"!=t||!(e.summary.includes("Туман")||e.summary.includes("туман")||e.summary.includes("Fog")||e.summary.includes("fog"))||"snow"!=e.icon)}function fogToSnow(e){return e.includes("Туман")?e.replace("Туман","Снег"):e.includes("туман")?e.replace("туман","снег"):void 0}function convertSeconds(e){let t=new Date;return t.setTime(1e3*e),t.toISOString().slice(11,16)}function windIntensity(e,t,n){switch(n){case"us":case"uk2":e/=2;break;case"ca":e/=3.6}return e<=.2?localization[t].windIntensity.calm:.2<e&&e<=1.5?localization[t].windIntensity.light:1.5<e&&e<=3.3?localization[t].windIntensity.breeze:3.3<e&&e<=5.4?localization[t].windIntensity.gbreeze:5.4<e&&e<=7.9?localization[t].windIntensity.moderate:7.9<e&&e<=10.7?localization[t].windIntensity.fresh:10.7<e&&e<=13.8?localization[t].windIntensity.strong:13.8<e&&e<=17.1?localization[t].windIntensity.high:17.1<e&&e<=20.7?localization[t].windIntensity.gale:20.7<e&&e<=24.4?localization[t].windIntensity.sgale:24.4<e&&e<=28.4?localization[t].windIntensity.storm:28.4<e&&e<=32.6?localization[t].windIntensity.vstorm:localization[t].windIntensity.hurricane}function videoBack(e,t){let n,o=new Date,a=o.getHours(),i=o.getMonth()+1;if(n="clear-day"==e||"rain"==e?i>=9&&i<11||11==i&&t>0?"-autumn":i>=11||i<=2&&t<0?"-winter":i>=3&&i<=5?"-spring":"-summer":"","vid"!=localStorage.back){(a<=18||a<=5)&&"snow"==e&&(e+="_n"),document.querySelector("#videoBG").remove();let t=document.createElement("img");t.src=`https://d3aid59h00lu28.cloudfront.net/img/back/${e+n}.png`,t.id="videoBG",document.body.prepend(t),console.log(`https://d3aid59h00lu28.cloudfront.net/img/back/${e+n}.png`)}else if(null!=document.querySelector("#videoBG > source")){let t=document.createElement("video");t.setAttribute("autoplay",!0),t.setAttribute("muted",!0),t.setAttribute("loop",!0),t.setAttribute("poster",`https://d3aid59h00lu28.cloudfront.net/img/back/${e+n}.png`),t.id="videoBG",t.classList.add("no_opacity");let o=document.createElement("source");o.src=`https://d3aid59h00lu28.cloudfront.net/videos/${e+n}.mp4`,o.type="video/mp4",t.appendChild(o);let a=document.createElement("source");a.src=`https://d3aid59h00lu28.cloudfront.net/videos/webm/${e+n}.webm`,a.type="video/webm",t.appendChild(a),document.querySelector("#videoBG").classList.add("no_opacity"),setTimeout(()=>{document.querySelector("#videoBG").classList.remove("full_opacity"),document.querySelector("#videoBG").remove(),document.body.prepend(t),document.querySelector("#videoBG").classList.add("full_opacity"),setTimeout(()=>document.querySelector("#videoBG").classList.remove("no_opacity"),400)},400)}else{let t=document.createElement("source");t.src=`https://d3aid59h00lu28.cloudfront.net/videos/${e+n}.mp4`,t.type="video/mp4";let o=document.createElement("source");o.src=`https://d3aid59h00lu28.cloudfront.net/videos/webm/${e+n}.webm`,o.type="video/webm",document.querySelector("#videoBG").appendChild(t),document.querySelector("#videoBG").appendChild(o),document.querySelector("#videoBG").classList.add("full_opacity"),setTimeout(()=>document.querySelector("#videoBG").classList.remove("no_opacity"),400)}}window.mobileAndTabletCheck=function(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e};let localization={ru:{app_temp:"Ощущается как: ",pop:"Вероятность осадков",uv:"Интенсивность УФ ",uvint:"Интенсивность УФ: ",clouds:"Облачное покрытие",temp:"Температура",wind:"Ветер",sunr:"Рассвет: ",suns:"Закат: ",pres:"Давление: ",hum:"Влажность",dwp:"Точка росы",date:"DD.MM",curr:"Текущая погода",local:"Язык",uni:"Единицы измерения",back:"Фон",back_p:"Эта опция позволяет вам выбрать фон сайта. Фон-изображение может заметно сократить время загрузки.",img:"Изображение",vid:"Видео",source:"Источники",tochange:"Чтобы подвердить изменения, закройте окно настроек. Страница автоматически перезагрузится.",loading:"Страница загружается, пожалуйста, подождите.",not_load:"Если страница долго не загружается, проверьте, включена ли геолокация на вашем устройстве и разрешено ли её использование на этом сайте.",geo_error:"Версия вашего браузера не поддерживает функцию передачи геолокации сторонним сайтам. Обновите его до последней версии и попробуйте снова.",wind_dir_h:"Направление ветра<br><span>(только для мобильных устройств)</span>",wind_dir:"Эта функция включает автопозиционирование стрелки, которая показывает направление ветра относительно Северного полюса.<br> Может работать не на всех устройствах.<br> Если ваш компас работает некорректно, откалибруйте его в Google/Apple Maps.",directions:["С","СВ","В","ЮВ","Ю","ЮЗ","З","СЗ"],on:"Включить",off:"Выключить",compass_error:"Ваш браузер не поддерживает получение данных компаса. Пожалуйста, обновите его до последней версии и попробуйте снова.",compass_f:"Сервис не смог получить информацию компаса. Обновите ваш браузер до последней версии и попробуйте снова.",search_place:"Название города...",not_found:"По вашему запросу ничего не было найдено. Пожалуйста, попробуйте ещё раз.",undefined:"Не определено (полярный день/ночь)",updated:"Ваши данные на ",refresh:'Обновить \n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" class=\'refresh_icon\' x="0px" y="0px" viewBox="0 0 489.711 489.711" style="enable-background:new 0 0 489.711 489.711;" xml:space="preserve">\n<g>\n\t<g>\n\t\t<path d="M112.156,97.111c72.3-65.4,180.5-66.4,253.8-6.7l-58.1,2.2c-7.5,0.3-13.3,6.5-13,14c0.3,7.3,6.3,13,13.5,13    c0.2,0,0.3,0,0.5,0l89.2-3.3c7.3-0.3,13-6.2,13-13.5v-1c0-0.2,0-0.3,0-0.5v-0.1l0,0l-3.3-88.2c-0.3-7.5-6.6-13.3-14-13    c-7.5,0.3-13.3,6.5-13,14l2.1,55.3c-36.3-29.7-81-46.9-128.8-49.3c-59.2-3-116.1,17.3-160,57.1c-60.4,54.7-86,137.9-66.8,217.1    c1.5,6.2,7,10.3,13.1,10.3c1.1,0,2.1-0.1,3.2-0.4c7.2-1.8,11.7-9.1,9.9-16.3C36.656,218.211,59.056,145.111,112.156,97.111z"/>\n\t\t<path d="M462.456,195.511c-1.8-7.2-9.1-11.7-16.3-9.9c-7.2,1.8-11.7,9.1-9.9,16.3c16.9,69.6-5.6,142.7-58.7,190.7    c-37.3,33.7-84.1,50.3-130.7,50.3c-44.5,0-88.9-15.1-124.7-44.9l58.8-5.3c7.4-0.7,12.9-7.2,12.2-14.7s-7.2-12.9-14.7-12.2l-88.9,8    c-7.4,0.7-12.9,7.2-12.2,14.7l8,88.9c0.6,7,6.5,12.3,13.4,12.3c0.4,0,0.8,0,1.2-0.1c7.4-0.7,12.9-7.2,12.2-14.7l-4.8-54.1    c36.3,29.4,80.8,46.5,128.3,48.9c3.8,0.2,7.6,0.3,11.3,0.3c55.1,0,107.5-20.2,148.7-57.4    C456.056,357.911,481.656,274.811,462.456,195.511z"/>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n    ',details:"Рассвет/закат, точка росы, давление и др.",details_hide:"Скрыть",Mon:"Пн,",Tue:"Вт,",Wed:"Ср,",Thu:"Чт,",Fri:"Пт,",Sat:"Сб,",Sun:"Вс,",units:{us:{temp:"°F",wind_units:"ми/ч",pres_units:" мм рт.ст."},ca:{temp:"°C",wind_units:"км/ч",pres_units:" мм рт.ст."},si:{temp:"°C",wind_units:"м/с",pres_units:" мм рт.ст."},uk2:{temp:"°C",wind_units:"ми/ч",pres_units:" мм рт.ст."}},windIntensity:{calm:"Штиль, ",light:"Тихий, ",breeze:"Лёгкий, ",gbreeze:"Слабый, ",moderate:"Умеренный, ",fresh:"Свежий, ",strong:"Сильный, ",high:"Крепкий, ",gale:"Очень крепкий, ",sgale:"Шторм, ",storm:"Сильный шторм, ",vstorm:"Жестокий шторм, ",hurricane:"Ураган, "},tooltips:["Здесь вы можете настроить сайт согласно вашим предпочтениям: изменить язык, единицы измерения и т.д.","Нажав на любую из этих иконок, вы сможете увидеть прогноз погоды в данный день.","Также для просмотра прогноза погоды вы можете использовать диаграмму.","Нажав на эту иконку, вы сможете узнать прогноз погоды для вашего населённого пункта.","Нажав на эту иконку, вы сможете найти прогноз погоды для многих населённых пунктов планеты."]},en:{app_temp:"Feels like: ",pop:"Precipation",uvint:"UV intensity: ",uv:"UV",temp:"Temparature",clouds:"Cloud coverage",wind:"Wind",sunr:"Sunrise: ",suns:"Sunset: ",pres:"Pressure: ",hum:"Humidity",dwp:"Dew point",date:"MM.DD",curr:"Current mode",local:"Language",uni:"Units of measurements",back:"Background",back_p:"This option lets you choose your background. Consider using image background if the website takes too long to load.",img:"Image",vid:"Video",source:"Sources",tochange:"Close the settings window to confirm the changes. The page will automatically reload.",geo_error:"Your browser version does not support the function of transferring geolocation to third-party sites. Please update it to the latest version and try again.",wind_dir_h:"Wind direction<br><span>(only for mobile devices)</span>",wind_dir:"This function enables auto-positioning of the wind arrow relative to the North Pole.<br> May not work on every device.<br> If the compass doesn't work correctly, consider recalibrate it in the Google/Apple Maps.",directions:["N","NE","E","SE","S","SW","W","NW"],on:"On",off:"Off",compass_error:"Compass heading is not available in your browser. Consider update it to the last version and try again.",compass_f:"Could not retrieve absolute orientation. Consider update your browser to the last version and try again.",search_place:"City name...",not_found:"Nothing has been found. Please, try again.",undefined:"Undefined (polar day/night)",updated:"Your data is on",refresh:'Обновить \n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" class=\'refresh_icon\' x="0px" y="0px" viewBox="0 0 489.711 489.711" style="enable-background:new 0 0 489.711 489.711;" xml:space="preserve">\n<g>\n\t<g>\n\t\t<path d="M112.156,97.111c72.3-65.4,180.5-66.4,253.8-6.7l-58.1,2.2c-7.5,0.3-13.3,6.5-13,14c0.3,7.3,6.3,13,13.5,13    c0.2,0,0.3,0,0.5,0l89.2-3.3c7.3-0.3,13-6.2,13-13.5v-1c0-0.2,0-0.3,0-0.5v-0.1l0,0l-3.3-88.2c-0.3-7.5-6.6-13.3-14-13    c-7.5,0.3-13.3,6.5-13,14l2.1,55.3c-36.3-29.7-81-46.9-128.8-49.3c-59.2-3-116.1,17.3-160,57.1c-60.4,54.7-86,137.9-66.8,217.1    c1.5,6.2,7,10.3,13.1,10.3c1.1,0,2.1-0.1,3.2-0.4c7.2-1.8,11.7-9.1,9.9-16.3C36.656,218.211,59.056,145.111,112.156,97.111z"/>\n\t\t<path d="M462.456,195.511c-1.8-7.2-9.1-11.7-16.3-9.9c-7.2,1.8-11.7,9.1-9.9,16.3c16.9,69.6-5.6,142.7-58.7,190.7    c-37.3,33.7-84.1,50.3-130.7,50.3c-44.5,0-88.9-15.1-124.7-44.9l58.8-5.3c7.4-0.7,12.9-7.2,12.2-14.7s-7.2-12.9-14.7-12.2l-88.9,8    c-7.4,0.7-12.9,7.2-12.2,14.7l8,88.9c0.6,7,6.5,12.3,13.4,12.3c0.4,0,0.8,0,1.2-0.1c7.4-0.7,12.9-7.2,12.2-14.7l-4.8-54.1    c36.3,29.4,80.8,46.5,128.3,48.9c3.8,0.2,7.6,0.3,11.3,0.3c55.1,0,107.5-20.2,148.7-57.4    C456.056,357.911,481.656,274.811,462.456,195.511z"/>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n    ',details:"Sunrise/sunset, dew point, pressure and more.",details_hide:"Hide",Mon:"Mon,",Tue:"Tue,",Wed:"Wed,",Thu:"Thu,",Fri:"Fri,",Sat:"Sat,",Sun:"Sun,",loading:"Your page is loading, please wait.",not_load:"If page takes a long time loading, please, consider checking if your geolocation service is on and allowed for use on this site.",units:{us:{temp:"°F",wind_units:"mph",pres_units:" mb"},ca:{temp:"°C",wind_units:"km/h",pres_units:" mb"},si:{temp:"°C",wind_units:"m/s",pres_units:" mb"},uk2:{temp:"°C",wind_units:"mph",pres_units:" mb"}},windIntensity:{calm:"Calm, ",light:"Light air, ",breeze:"Light breeze, ",gbreeze:"Gentle breeze, ",moderate:"Moderate breeze, ",fresh:"Fresh breeze, ",strong:"Strong breeze, ",high:"High wind, ",gale:"Gale, ",sgale:"Strong gale, ",storm:"Storm, ",vstorm:"Violent storm, ",hurricane:"Hurricane, "},tooltips:["Here you can customize the site according to your preferences: change the language, units of measurement, etc.","If you click on any of these icons, you will see the weather forecast for that day.","You can also use the chart to view the weather forecast.","If you'll click on this icon, you'll see the weather forecast for your location.","By clicking on this icon, you can find the weather forecast for many localities on the planet."]}};function getCardinalDirection(e,t){return t[Math.floor(e/45+.5)%8]}let settingsIcon=document.querySelector("#settings > svg"),closeBtn=document.getElementById("close_settings"),lat="37.42158889770508",lon="-122.08370208740234",searchIcon=document.querySelector("#search > img"),closeSearch=document.querySelector("#close_search");null==localStorage.tools&&(localStorage.lang="ru",localStorage.units="si",localStorage.wind="off",localStorage.back="vid",localStorage.location="off",localStorage.tools="true",window.mobileAndTabletCheck()&&(localStorage.wind="on"));let settingsInputs=[];settingsInputs[0]=document.querySelectorAll(".lang"),settingsInputs[1]=document.querySelectorAll(".units"),settingsInputs[2]=document.querySelectorAll(".wind-input"),settingsInputs[3]=document.querySelectorAll(".back-input");for(let e=0;e<settingsInputs[0].length;e++)localStorage.lang==settingsInputs[0][e].value&&(settingsInputs[0][e].checked=!0),settingsInputs[0][e].addEventListener("click",()=>{localStorage.lang=settingsInputs[0][e].value});for(let e=0;e<settingsInputs[1].length;e++)localStorage.units==settingsInputs[1][e].value&&(settingsInputs[1][e].checked=!0),settingsInputs[1][e].addEventListener("click",()=>{localStorage.units=settingsInputs[1][e].value});for(let e=0;e<settingsInputs[2].length;e++)localStorage.wind==settingsInputs[2][e].value&&(settingsInputs[2][e].checked=!0),settingsInputs[2][e].addEventListener("click",()=>{localStorage.wind=settingsInputs[2][e].value});for(let e=0;e<settingsInputs[3].length;e++)localStorage.back==settingsInputs[3][e].value&&(settingsInputs[3][e].checked=!0),settingsInputs[3][e].addEventListener("click",()=>{localStorage.back=settingsInputs[3][e].value});settingsIcon.addEventListener("click",()=>{document.getElementsByClassName("settings_window")[0].style.zIndex=2,document.getElementsByClassName("settings_window")[0].style.clipPath="circle(100%)"}),closeBtn.addEventListener("click",()=>{document.getElementsByClassName("settings_window")[0].style.clipPath="circle(0.1% at 53.6% 2.2%)",setTimeout(()=>(document.getElementsByClassName("settings_window")[0].style.zIndex=-2,location.reload(),!1),550)}),searchIcon.addEventListener("click",()=>{document.getElementsByClassName("search_window")[0].style.zIndex=5,document.getElementsByClassName("search_window")[0].style.clipPath="circle(200%)"}),closeSearch.addEventListener("click",()=>{document.getElementsByClassName("search_window")[0].style.clipPath="circle(0.1% at 55.6% 28.2%)",setTimeout(()=>(document.getElementsByClassName("search_window")[0].style.zIndex=-5,!1),550)});let load_text=document.getElementsByClassName("loading_support");function cityName(e){if(null==document.querySelector(".city")){let t=document.createElement("span");t.classList.add("city"),""==e.city?t.innerHTML=e.locality+", "+e.countryName:t.innerHTML=e.city+", "+e.countryName,document.getElementById("current").append(t)}else""==e.city?document.querySelector(".city").innerHTML=e.locality+", "+e.countryName:document.querySelector(".city").innerHTML=e.city+", "+e.countryName}function isCache(){let e=new Date;e=e.getTime();let t=localStorage.getItem("cached_data");return t=JSON.parse(t),console.log(t),null==t||e>1e3*t[0].daily.data[6].time?[!1]:[!0,e,t]}async function getWeather(e,t,n,o,a){let i=isCache(),l=i[2],r=i[1];const c=`weather/${e},${t}/${n}/${o}`,d={method:"GET",withCredentials:!0,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}};if(0==i[0]||a.locality!=l[1].locality){console.log("после 6-дневного");const e=await fetch(c,d);return[await e.json(),a,8,169]}if(r-1e3*l[0].currently.time>288e5){document.getElementsByClassName("updating")[0].classList.toggle("updating_closed");let e=Math.round((1e3*l[0].daily.data[7].time-r)/864e5)+1,t=Math.round((1e3*l[0].daily.data[7].time-r)/36e5);return console.log("до 6-дневного после 8-ми часов",t),[l[0],l[1],e,t]}if(r-1e3*l[0].currently.time<288e5){let e=Math.round((1e3*l[0].daily.data[7].time-r)/864e5)+1,t=Math.round((1e3*l[0].hourly.data[168].time-r)/36e5)+1;return console.log("до 6-дневного до 8-ми часов",e),[l[0],l[1],e,t]}}function loaded(e=localStorage){let t;if(localStorage!=e&&(e=localStorage),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)}))})),"geolocation"in navigator){let a,i=e.lang,l=e.units,r=document.getElementById("city_input"),c=!0,d=[],s=isCache();function n(e,t){var n,o=document.getElementsByClassName(e),a=0;for(n=0;n<o.length;n++)o[n].onmouseover=function(e){return function(){o[a].style.backgroundColor="",o[a=e].style.backgroundColor="#68F"}}(n);o[a].style.backgroundColor="#68F",document.getElementById(t).onkeydown=function(e){var n=0;if("ArrowUp"==e.key)n=-1;else if("ArrowDown"==e.key)n=1;else{if("Enter"!=e.key)return;o[a].click(),document.getElementById(t).focus()}o[a].style.backgroundColor="",a=(a=(a+n)%o.length)<0?o.length+a:a,o[a].style.backgroundColor="#68F"}}if(r.setAttribute("placeholder",localization[i].search_place),r.oninput=function(){fetch(`https://api.teleport.org/api/cities/?search=${r.value}&limit=8`).then(e=>e.json()).then(e=>{if(0==e.count||" "==r.value){let e=document.querySelectorAll(".auto_item"),t=document.createElement("div");t.className="auto_wrapper",document.getElementsByClassName("search_window")[0].append(t);for(let t=0;t<e.length;t++)e[t].remove();null!=document.querySelector(".not_found")&&document.querySelector(".not_found").remove(),d=[];let n=document.createElement("span");n.className="not_found",n.innerHTML=localization[i].not_found,document.querySelector(".auto_wrapper").append(n)}else if(c&&" "!=r.value&&""!=r.value){null!=document.querySelector(".not_found")&&document.querySelector(".not_found").remove();let t=document.createElement("div");t.className="auto_wrapper",document.getElementsByClassName("search_window")[0].append(t),c=!1;for(let t=0;t<e._embedded["city:search-results"].length;t++){d[t]=e._embedded["city:search-results"][t].matching_full_name,document.querySelector(".auto_wrapper").insertAdjacentHTML("beforeend",`\n                  <input type='radio' name='search_res' id='search_${t}'>\n                  <label for='search_${t}'><span class='auto_item'>${d[t]}</span></label>`),document.getElementById("search_"+t).onclick=()=>{fetch(e._embedded["city:search-results"][t]._links["city:item"].href).then(e=>e.json()).then(e=>{fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e.location.latlon.latitude}&longitude=${e.location.latlon.longitude}&localityLanguage=${i}`).then(e=>e.json()).then(t=>{a=getWeather(e.location.latlon.latitude,e.location.latlon.longitude,i,l,t),a.then(e=>{console.log(e),document.getElementsByClassName("search_window")[0].style.clipPath="circle(0.1% at 53.6% 6.2%)",setTimeout(()=>(document.getElementsByClassName("search_window")[0].style.zIndex=-5,!1),550),o(e),cityName(e[1])})}),console.log(e.location.latlon)})}}n("auto_item","city_input")}else if(""!=r.value&&" "!=r.value){null!=document.querySelector(".not_found")&&document.querySelector(".not_found").remove();let t=document.querySelectorAll(".auto_item");for(let e=0;e<t.length;e++)t[e].remove();d=[];for(let t=0;t<e._embedded["city:search-results"].length;t++){d[t]=e._embedded["city:search-results"][t].matching_full_name,document.querySelector(".auto_wrapper").insertAdjacentHTML("beforeend",`\n                    <input type='radio' name='search_res' id='search_${t}'>\n                    <label for='search_${t}'><span class='auto_item'>${d[t]}</span></label>`),document.getElementById("search_"+t).onclick=()=>{fetch(e._embedded["city:search-results"][t]._links["city:item"].href).then(e=>e.json()).then(e=>{fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e.location.latlon.latitude}&longitude=${e.location.latlon.longitude}&localityLanguage=${i}`).then(e=>e.json()).then(t=>{a=getWeather(e.location.latlon.latitude,e.location.latlon.longitude,i,l,t),a.then(e=>{document.getElementsByClassName("search_window")[0].style.clipPath="circle(0.1% at 53.6% 6.2%)",setTimeout(()=>(document.getElementsByClassName("search_window")[0].style.zIndex=-5,!1),550),console.log(e),o(e),cityName(e[1])})}),console.log(e.location.latlon)})}}n("auto_item","city_input")}else null!=document.querySelector(".auto_wrapper")&&document.querySelector(".auto_wrapper").remove(),c=!0})},"off"==localStorage.location)fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=${i}`).then(e=>e.json()).then(e=>{t=getWeather(lat,lon,i,l,e),t.then(e=>{cityName(e[1]),o(e)})});else if(s[0]){let e=s[2],t=s[1];if(t-1e3*e[0].currently.time>288e5){document.getElementsByClassName("updating")[0].classList.toggle("updating_closed");let n=Math.round((1e3*e[0].daily.data[7].time-t)/864e5)+1,a=Math.round((1e3*e[0].hourly.data[168].time-t)/36e5)+1;console.log("до 6-дневного после 8-ми часов",a),cityName(e[1]),o([e[0],e[1],n,a])}else{let n=Math.round((1e3*e[0].daily.data[7].time-t)/864e5)+2,a=Math.round((1e3*e[0].hourly.data[168].time-t)/36e5)+1;console.log("до 6-дневного до 8-ми часов",n),cityName(e[1]),o([e[0],e[1],n,a])}}else t=new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){let n;fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${t.coords.latitude}&longitude=${t.coords.longitude}&localityLanguage=${i}`).then(e=>e.json()).then(o=>{n=o,e([t.coords.latitude,t.coords.longitude,i,l,n])})}))})).then(e=>getWeather(e[0],e[1],e[2],e[3],e[4])),t.then(e=>{cityName(e[1]),o(e)});function o(e){localStorage.setItem("cached_data",JSON.stringify(e));let t=e[1],n=e[2],o=e[3],a=convertSeconds((e=e[0]).currently.time+3600*e.offset),r=moment(1e3*e.currently.time);function c(t){var n;"currently"==d?(t.absolute?n=t.alpha:t.hasOwnProperty("webkitCompassHeading")?n=360-t.webkitCompassHeading:(console.log("Could not retrieve absolute orientation"),n=e[d].windBearing+45),n=n+225-e[d].windBearing,document.querySelector(".wind_dir").style.transform=`rotate(${n}deg)`):(n=(n=t.absolute?360-t.alpha:t.hasOwnProperty("webkitCompassHeading")?360-t.webkitCompassHeading:d.windBearing+45)+225-d.windBearing,document.querySelector(".wind_dir").style.transform=`rotate(${n}deg)`)}document.getElementsByClassName("updating")[0].innerHTML=`\n    <span>${localization[i].updated}${a}, ${r.format("DD[.]MM[.]YYYY")}</span>\n    <span>${localization[i].refresh}</span>\n    `,document.getElementsByClassName("updating_footer")[0].innerHTML=`\n    <span>${localization[i].updated}${a}, ${r.format("DD[.]MM[.]YYYY")}</span>\n    <span>${localization[i].refresh}</span>\n    `,console.log(t,e);let d="currently";function s(t,n){d=t,d="currently"!=d?e[d].data[n]:e[d],"ondeviceorientationabsolute"in window&&"on"==localStorage.wind?window.addEventListener("deviceorientationabsolute",c):"ondeviceorientation"in window&&"on"==localStorage.wind?window.addEventListener("deviceorientation",c):"off"==localStorage.wind||null==localStorage.wind?(window.removeEventListener("deviceorientationabsolute",c),window.removeEventListener("deviceorientation",c),setTimeout(()=>document.querySelector(".wind_dir").style.transform=`rotate(${d.windBearing+225}deg)`,1e3)):(alert(localization[i].compass_error),document.querySelector(".wind_dir").style.transform=`rotate(${d.windBearing+225}deg)`)}function u(e,t){switch(e){case"temp":g("temperature","rgb(255, 81, 81)","rgba(255, 81, 81, 0.25)",localization[i].units[l].temp,t);break;case"wind":g("windSpeed","rgb(0,204,255)","rgba(0,204,255, 0.25)",localization[i].units[l].wind_units,t);break;case"humidity":g("humidity","rgb(0,238,255)","rgba(0,238,255, 0.25)","%",t);break;case"uv":g("uvIndex","rgb(163,78,233)","rgba(163,78,233, 0.25)","",t);break;case"clouds":g("cloudCover","rgb(104,231,142)","rgba(104,231,142, 0.25)","%",t);break;case"precipProbability":g("precipProbability","rgb(0, 119, 255)","rgba(0, 119, 255, 0.25)","%",t)}}function m(e){let t=document.getElementsByClassName("slide-toggle");t[0].checked=!0,function(){let e=document.getElementById("slidemenu"),t=e.cloneNode(!0);e.remove(),document.getElementById("display").appendChild(t)}();for(let n=0;n<t.length;n++)t[n].addEventListener("click",()=>{u(t[n].value,e)})}let p=document.createElement("img");function g(t,n,o,a,r){document.getElementById("myChart").remove();let c=document.createElement("canvas");c.id="myChart",document.getElementsByClassName("chart-container")[0].append(c);let d=function(t,n){let o=!0,a=[],r=0,c=[];if(o=null==document.querySelector(".hour"),t<1e3&&0!=t){let d=0;for(let s=t;s<t+24;s++){a[d]="cloudCover"==n||"humidity"==n||"precipProbability"==n?Math.round(100*e.hourly.data[s][n]):Math.round(e.hourly.data[s][n]);let t=p.cloneNode(!0),u=e.hourly.data[s].icon;"cloudy"==snowCheck(e.hourly.data[s],"hourly")?u="cloudy":snowCheck(e.hourly.data[s],"hourly")&&"fog"==u&&(u="snow"),o?(document.querySelector("#hours").insertAdjacentHTML("beforeend",`\n                <div class="hour">\n                  <div class="pop">${Math.round(100*e.hourly.data[s].precipProbability)}%</div>\n                      <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${u}.svg" alt="${u}" class="sky">\n                      <div class="temp">${Math.round(e.hourly.data[s].temperature)+localization[i].units[l].temp}</div>\n                      <div class="time">${convertSeconds(e.hourly.data[s].time+3600*e.offset)}</div>\n                </div>\n                `),document.querySelectorAll(".hour > .pop")[d].prepend(t),d++):(document.querySelectorAll(".hour > .pop")[d].innerHTML=Math.round(100*e.hourly.data[s].precipProbability)+"%",document.querySelectorAll(".hour > .temp")[d].innerHTML=Math.round(e.hourly.data[s].temperature)+localization[i].units[l].temp,document.querySelectorAll(".hour > .sky")[d].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${u}.svg`,document.querySelectorAll(".hour > .time")[d].innerHTML=convertSeconds(e.hourly.data[s].time+3600*e.offset),document.querySelectorAll(".hour > .pop")[d].prepend(t),d++),c[d-1]=convertSeconds(e.hourly.data[s].time+3600*e.offset),r<a[d-1]&&(r=a[d-1])}}else if(0==t)for(let t=0;t<24;t++){let d=e.hourly.data[t].icon;"cloudy"==snowCheck(e.hourly.data[t],"hourly")?d="cloudy":snowCheck(e.hourly.data[t],"hourly")&&"fog"==d&&(d="snow");let s=p.cloneNode(!0);o?(document.querySelector("#hours").insertAdjacentHTML("beforeend",`\n                    <div class="hour">\n                      <div class="pop">${Math.round(100*e.hourly.data[t].precipProbability)}%</div>\n                          <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${d}.svg" alt="${d}" class="sky">\n                          <div class="temp">${Math.round(e.hourly.data[t].temperature)+localization[i].units[l].temp}</div>\n                          <div class="time">${convertSeconds(e.hourly.data[t].time+3600*e.offset)}</div>\n                    </div>\n                    `),document.querySelectorAll(".hour > .pop")[t].prepend(s)):(document.querySelectorAll(".hour > .pop")[t].innerHTML=Math.round(100*e.hourly.data[t].precipProbability)+"%",document.querySelectorAll(".hour > .temp")[t].innerHTML=Math.round(e.hourly.data[t].temperature)+localization[i].units[l].temp,document.querySelectorAll(".hour > .sky")[t].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${d}.svg`,document.querySelectorAll(".hour > .time")[t].innerHTML=convertSeconds(e.hourly.data[t].time+3600*e.offset),document.querySelectorAll(".hour > .pop")[t].prepend(s)),a[t]="cloudCover"==n||"humidity"==n||"precipProbability"==n?Math.round(100*e.hourly.data[t][n]):Math.round(e.hourly.data[t][n]),c[t]=convertSeconds(e.hourly.data[t].time+3600*e.offset),r<a[t]&&(r=a[t])}else if(t>=1e3)for(let d=t/=1e3;d<e.hourly.data.length;d++)if(e.hourly.data[d].time==e.daily.data[t].time){console.log(d,t);for(let t=0;t<24;t++){let s=e.hourly.data[d+t].icon;"cloudy"==snowCheck(e.hourly.data[d+t],"hourly")?s="cloudy":snowCheck(e.hourly.data[d+t],"hourly")&&"fog"==s&&(s="snow");let u=p.cloneNode(!0);o?(console.log("prepending"),document.querySelector("#hours").insertAdjacentHTML("beforeend",`\n                    <div class="hour">\n                      <div class="pop">${Math.round(100*e.hourly.data[d+t].precipProbability)}%</div>\n                          <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${s}.svg" alt="${s}" class="sky">\n                          <div class="temp">${Math.round(e.hourly.data[d+t].temperature)+localization[i].units[l].temp}</div>\n                          <div class="time">${convertSeconds(e.hourly.data[d+t].time+3600*e.offset)}</div>\n                    </div>\n                    `),document.querySelectorAll(".hour > .pop")[t].prepend(u)):(document.querySelectorAll(".hour > .pop")[t].innerHTML=Math.round(100*e.hourly.data[d+t].precipProbability)+"%",document.querySelectorAll(".hour > .temp")[t].innerHTML=Math.round(e.hourly.data[d+t].temperature)+localization[i].units[l].temp,document.querySelectorAll(".hour > .sky")[t].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${s}.svg`,document.querySelectorAll(".hour > .time")[t].innerHTML=convertSeconds(e.hourly.data[d+t].time+3600*e.offset),document.querySelectorAll(".hour > .pop")[t].prepend(u)),a[t]="cloudCover"==n||"humidity"==n||"precipProbability"==n?Math.round(100*e.hourly.data[d+t][n]):Math.round(e.hourly.data[d+t][n]),c[t]=convertSeconds(e.hourly.data[d+t].time+3600*e.offset),r<a[t]&&(r=a[t])}}return[a,r,c]}(r,t),s=d[0],u=d[1],m=d[2],g=0;g=u>70?30:3;let y,h,w=document.getElementById("myChart").getContext("2d");if("temperature"==t){y=6,h={blue:"rgb(153, 206, 255)",yellow:"rgb(224, 209, 0)",red:"rgb(255, 99, 51)"};let e=0;for(let t=0;t<s.length;t++)s[t]<0&&e++;e>s.length/2?(o="rgba(56, 75, 243, 0.3)",h={blue:"rgb(56, 75, 243)",yellow:"rgb(33, 214, 250)",red:"rgb(24, 190, 140)"}):o="rgba(255, 81, 81, 0.25)"}else y=3;let f=null;new Chart(w,{type:"line",data:{labels:m,datasets:[{label:"",fill:!0,backgroundColor:o,borderColor:function(e){var o=e.chart.chartArea;if(!o)return null;if("temperature"==t){if(null===f){let t=e.chart.ctx;f=t.createLinearGradient(0,o.bottom,0,o.top),f.addColorStop(0,h.blue),f.addColorStop(.5,h.yellow),f.addColorStop(1,h.red)}}else f=n;return f},data:s,borderWidth:y}]},options:{maintainAspectRatio:!1,onAnimationComplete:function(){myBarChart.showTooltip(bars,!1)},scales:{xAxes:[{gridLines:{color:"rgba(255, 255, 255, 0.25)",zeroLineColor:"rgba(255, 255, 255, 0.25)",drawBorder:!1},ticks:{fontColor:"#fff",fontSize:18}}],yAxes:[{display:!1,gridLines:{color:"rgba(255, 255, 255, 0)",zeroLineColor:"rgba(255, 255, 255, 0.25)"},ticks:{beginAtZero:!0,max:u+g}}]},legend:{display:!1},showAllTooltips:!0,tooltips:{backgroundColor:"rgba(0, 0, 0, 0)",displayColors:!1,bodyFontSize:18,bodyAlign:"center",xPadding:-20,bodyFontFamily:"'Rubik', sans-serif",callbacks:{label:function(e,t){return e.yLabel+a},title:function(){return null}}}}})}function y(){let e=document.querySelector("#location");tippy(e,{content:localization[i].tooltips[3],theme:"normal",sticky:!0,arrow:!0,showOnCreate:!0,placement:"bottom",delay:500,maxWidth:250,onHidden(e){e.destroy(),function(){let e=document.querySelector("#search");tippy(e,{content:localization[i].tooltips[4],theme:"normal",sticky:!0,arrow:!0,showOnCreate:!0,placement:"bottom",delay:500,maxWidth:250,onHidden(e){e.destroy(),localStorage.tools="false"}})}()}})}function h(){tippy(document.getElementsByClassName("day")[0],{content:localization[i].tooltips[1],theme:"normal",sticky:!0,arrow:!0,showOnCreate:!0,placement:"top",delay:500,maxWidth:250,onHidden(e){e.destroy(),window.scrollBy(0,.5*-document.documentElement.clientHeight),function(){let e=document.querySelector("#slidemenu > label");tippy(e,{content:localization[i].tooltips[2],theme:"normal",sticky:!0,arrow:!0,showOnCreate:!0,placement:"top",delay:500,maxWidth:250,onHidden(e){e.destroy(),window.scrollTo(0,0),y()}})}()}})}p.src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg",p.className="pop_drop",Chart.pluginService.register({beforeRender:function(e){e.config.options.showAllTooltips&&(e.pluginTooltips=[],e.config.data.datasets.forEach((function(t,n){e.getDatasetMeta(n).data.forEach((function(t,n){e.pluginTooltips.push(new Chart.Tooltip({_chart:e.chart,_chartInstance:e,_data:e.data,_options:e.options.tooltips,_active:[t]},e))}))})),e.options.tooltips.enabled=!1)},afterDraw:function(e,t){if(e.config.options.showAllTooltips){if(!e.allTooltipsOnce){if(1!==t)return;e.allTooltipsOnce=!0}e.options.tooltips.enabled=!0,Chart.helpers.each(e.pluginTooltips,(function(e){e.initialize(),e.update(),e.pivot(),e.transition(t).draw()})),e.options.tooltips.enabled=!1}}});let w=document.querySelectorAll(".wind-subitem_label > h3");w[0].innerHTML=localization[i].local,w[1].innerHTML=localization[i].uni,w[2].innerHTML=localization[i].wind_dir_h,w[3].innerHTML=localization[i].back,w[4].innerHTML=localization[i].source,document.querySelector(".settings_block > span").innerHTML=localization[i].tochange,document.querySelector(".wind-settings  p").innerHTML=localization[i].wind_dir,document.querySelector(".settings_item  p").innerHTML=localization[i].back_p;let f=document.querySelectorAll(".turn_wind");f[0].innerHTML=localization[i].on,f[1].innerHTML=localization[i].off;let v=document.querySelectorAll(".back-label > span");v[0].innerHTML=localization[i].img,v[1].innerHTML=localization[i].vid,2020==moment().format("YYYY")?document.querySelector("#legal > p>span").innerHTML=moment().format("YYYY"):document.querySelector("#legal > p> span").innerHTML="2020-"+moment().format("YYYY"),document.getElementById("show_details").innerHTML=localization[i].details;let b=document.getElementById("show_details"),S=!1;function _(t){let n=e.currently;t>0&&(n=e.hourly.data[t]);let o=snowCheck(n,"currently");window.matchMedia("(max-width: 700px)").matches&&0==window.matchMedia("(max-width: 550px)").matches?(document.getElementById("details").style.marginTop="-40px",document.getElementById("other").style.marginTop="-40px"):window.matchMedia("(max-width: 550px)").matches&&(document.getElementById("other").style.marginTop="0",document.getElementById("details").style.marginTop="0");let a=document.createElement("img"),r=n.icon;o?("fog"==r&&(a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/snow.svg",a.alt="snow",r="snow"),document.querySelector(".condition").innerHTML=fogToSnow(n.summary)):(a.alt=n.icon,a.src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${n.icon}.svg`,document.querySelector(".condition").innerHTML=n.summary);let c=moment(1e3*n.time);c=c.format(localization[i].date),console.log(c),videoBack("31.12"==c||"12.31"==c?"newYear":r,n.temperature),a.className="icon";let d=document.createElement("img");d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg",d.alt="",d.className="curr_icon",document.querySelector(".temp_val").innerHTML=Math.round(n.temperature)+localization[i].units[l].temp,document.querySelector(".app_temp").innerHTML=localization[i].app_temp+""+Math.round(n.apparentTemperature)+localization[i].units[l].temp,document.querySelector(".condition").prepend(a),document.querySelector(".propability").innerHTML=localization[i].pop+": "+Math.round(100*e.hourly.data[0].precipProbability)+"%",document.querySelector(".propability").prepend(d),d=d.cloneNode(!0),d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/uv.svg",document.querySelector(".uv").innerHTML=localization[i].uvint+n.uvIndex,document.querySelector(".uv").prepend(d),d=d.cloneNode(!0),d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/coverage.svg",document.querySelector(".clouds").innerHTML=localization[i].clouds+": "+Math.round(100*n.cloudCover)+"%",document.querySelector(".clouds").prepend(d),d=d.cloneNode(!0),d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/wind.svg",document.querySelector(".wind_text > h3").innerHTML=localization[i].wind+": ",document.querySelector(".wind_text > h3").prepend(d),document.querySelector(".wind_speed").innerHTML=windIntensity(n.windSpeed,i,l)+getCardinalDirection(n.windBearing,localization[i].directions)+", "+n.windSpeed+" "+localization[i].units[l].wind_units,s("currently"),d=d.cloneNode(!0),d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/sunrise.svg",void 0===e.daily.data[0].sunriseTime?document.querySelector("#sunr").innerHTML=localization[i].undefined:document.querySelector("#sunr").innerHTML=localization[i].sunr+convertSeconds(e.daily.data[0].sunriseTime+3600*e.offset),document.querySelector("#sunr").prepend(d),d=d.cloneNode(!0),d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/sunset.svg",void 0===e.daily.data[0].sunsetTime?document.querySelector("#suns").innerHTML=localization[i].undefined:document.querySelector("#suns").innerHTML=localization[i].suns+convertSeconds(e.daily.data[0].sunsetTime+3600*e.offset),document.querySelector("#suns").prepend(d),d=d.cloneNode(!0),d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/pressure.svg",document.querySelector("#pres").innerHTML=localization[i].pres+n.pressure+localization[i].units[l].pres_units,document.querySelector("#pres").prepend(d),d=d.cloneNode(!0),d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/humidity.svg",document.querySelector("#hum").innerHTML=localization[i].hum+": "+Math.round(100*n.humidity)+"%",document.querySelector("#hum").prepend(d),d=d.cloneNode(!0),d.src="https://d3aid59h00lu28.cloudfront.net/img/icons/dewpoint.svg",document.querySelector("#dew").innerHTML=localization[i].dwp+": "+Math.round(n.dewPoint)+localization[i].units[l].temp,document.querySelector("#dew").prepend(d);let u=document.querySelectorAll("#slidemenu > label > span");u[0].innerHTML=localization[i].temp,u[1].innerHTML=localization[i].wind,u[2].innerHTML=localization[i].hum,u[3].innerHTML=localization[i].uv,u[4].innerHTML=localization[i].clouds,u[5].innerHTML=localization[i].pop,null!=document.getElementsByClassName("backto")[0]&&document.getElementsByClassName("backto")[0].remove(),m(t),g("temperature","rgb(255, 81, 81)","rgba(255, 81, 81, 0.25)",localization[i].units[l].temp,t),document.getElementById("days-fake").checked=!0}b.onclick=()=>{window.matchMedia("(max-width: 550px)").matches&&(document.getElementsByClassName("details_wrap")[0].classList.toggle("details_opened"),S?(S=!1,b.innerHTML=localization[i].details,setTimeout(()=>document.getElementsByClassName("details_wrap")[0].classList.toggle("details_hide"),210)):(S=!0,b.innerHTML=localization[i].details_hide,document.getElementsByClassName("details_wrap")[0].classList.toggle("details_hide")))},null!=load_text[0]&&(document.getElementsByClassName("loading")[0].remove(),document.getElementById("display").style.opacity="1",document.getElementById("legal").style.opacity="1",document.getElementById("days_wrap").style.opacity="1",document.getElementsByClassName("slider_wrap")[0].style.opacity=1,document.getElementsByClassName("anchor_wrapper")[0].classList.remove("hide_anchor"),"true"==localStorage.tools&&tippy(settingsIcon,{content:localization[i].tooltips[0],theme:"normal",sticky:!0,arrow:!0,showOnCreate:!0,placement:"bottom",delay:500,maxWidth:250,onHidden(e){e.destroy(),window.scrollBy(0,document.body.scrollHeight),h()}})),_(169-o);let M=!0;M=8-n!=0||null==document.querySelector(".day");for(let t=8-n;t<8;t++){let n=moment(1e3*e.daily.data[t].time),o=e.daily.data[t].icon;if("cloudy"==snowCheck(e.daily.data[t],"daily")?o="cloudy":snowCheck(e.daily.data[t],"daily")&&"fog"==o&&(o="snow"),M)7!=t?document.querySelector("#days").insertAdjacentHTML("beforeend",`\n              <input type="radio" name="days-radio" id="days-${t+1}" class="days_radio">\n              <label for="days-${t+1}" class="day">\n                      <div class="pop">\n                      <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg" class="pop_drop">${Math.round(100*e.daily.data[t].precipProbability)}%\n                      </div>\n                      <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${o}.svg" alt="${o}" class="sky">\n                      <div class="temp">\n                        <div class="temp_max">\n                          ${Math.round(e.daily.data[t].temperatureMax)}${localization[i].units[l].temp}</div>\n                        <div class="temp_min">\n                          ${Math.round(e.daily.data[t].temperatureMin)}${localization[i].units[l].temp}</div>\n                      </div>\n                      <div class="date">${localization[i][n.format("ddd")]+"<br>"+n.format(localization[i].date)}</div>\n              </label>`):document.querySelector("#days").insertAdjacentHTML("beforeend",`\n                <div class="day">\n                  <div class="pop">\n                  <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg" class="pop_drop">${Math.round(100*e.daily.data[t].precipProbability)}%\n                  </div>\n                  <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${o}.svg" alt="${o}" class="sky">\n                  <div class="temp">\n                    <div class="temp_max">\n                      ${Math.round(e.daily.data[t].temperatureMax)}${localization[i].units[l].temp}</div>\n                    <div class="temp_min">\n                      ${Math.round(e.daily.data[t].temperatureMin)}${localization[i].units[l].temp}</div>\n                  </div>\n                  <div class="date">${localization[i][n.format("ddd")]+"<br>"+n.format(localization[i].date)}</div>\n                </div>`);else{if(7==t)break;document.querySelectorAll(".day > .pop")[t].innerHTML=`<img src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg" class="pop_drop">${Math.round(100*e.daily.data[t].precipProbability)}%`,document.querySelectorAll(".day > .sky")[t].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${o}.svg`,document.querySelectorAll(".day > .sky")[t].alt=o,document.querySelectorAll(".day > .temp")[t].innerHTML=`\n              <div class="temp_max">\n                ${Math.round(e.daily.data[t].temperatureMax)}${localization[i].units[l].temp}</div>\n              <div class="temp_min">\n                ${Math.round(e.daily.data[t].temperatureMin)}${localization[i].units[l].temp}</div>\n              `,document.querySelectorAll(".date")[t].innerHTML=localization[i][n.format("ddd")]+"<br>"+n.format(localization[i].date)}null!=document.getElementsByClassName("weekday")[t]&&document.getElementsByClassName("weekday")[t].remove()}function k(){let e=document.createElement("div");e.className="backto",e.innerHTML=localization[i].curr,e.onclick=()=>{_(169-o)},window.matchMedia("(max-width: 550px)").matches?document.getElementsByClassName("day")[0].before(e):(document.getElementsByClassName("app_temp")[0].after(e),document.getElementById("other").style.marginTop="0",document.getElementById("details").style.marginTop="0")}function z(t){let n=e.daily.data[t].icon;"cloudy"==snowCheck(e.daily.data[t],"daily")?n="cloudy":snowCheck(e.daily.data[t],"daily")?("fog"==n&&(n="snow"),document.querySelector(".condition").innerHTML=fogToSnow(e.daily.data[t].summary,"daily")):document.querySelector(".condition").innerHTML=e.daily.data[t].summary,"31.12"==document.querySelectorAll(".date")[t]||"12.31"==document.querySelectorAll(".date")[t]?videoBack("newYear",e.daily.data[t].temperatureMax):videoBack(n,e.daily.data[t].temperatureMax),document.getElementById("slide-item-1").checked="checked";let o=document.createElement("img");o.src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${n}.svg`,o.alt=o,o.className="icon",document.querySelector(".temp_val").innerHTML=Math.round(e.daily.data[t].temperatureMax)+localization[i].units[l].temp,document.querySelector(".app_temp").innerHTML=localization[i].app_temp+" "+Math.round(e.daily.data[t].apparentTemperatureMax)+localization[i].units[l].temp,document.querySelector(".condition").prepend(o);let a=document.createElement("img");a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg",a.alt="",a.className="curr_icon",null==document.getElementsByClassName("backto")[0]||document.getElementsByClassName("backto")[0].remove(),k(),window.onresize=()=>{null!=document.getElementsByClassName("backto")[0]&&(document.getElementsByClassName("backto")[0].remove(),k())},document.querySelector(".propability").innerHTML=localization[i].pop+": "+Math.round(100*e.daily.data[t].precipProbability)+"%",document.querySelector(".propability").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/uv.svg",document.querySelector(".uv").innerHTML=localization[i].uvint+e.daily.data[t].uvIndex,document.querySelector(".uv").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/coverage.svg",document.querySelector(".clouds").innerHTML=localization[i].clouds+": "+Math.round(100*e.daily.data[t].cloudCover)+"%",document.querySelector(".clouds").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/wind.svg",document.querySelector(".wind_text > h3").innerHTML=localization[i].wind+": ",document.querySelector(".wind_text > h3").prepend(a),document.querySelector(".wind_speed").innerHTML=windIntensity(e.daily.data[t].windSpeed,i,l)+getCardinalDirection(e.daily.data[t].windBearing,localization[i].directions)+", "+e.daily.data[t].windSpeed+" "+localization[i].units[l].wind_units,s("daily",t),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/sunrise.svg",void 0===e.daily.data[0].sunriseTime?document.querySelector("#sunr").innerHTML=localization[i].undefined:document.querySelector("#sunr").innerHTML=localization[i].sunr+convertSeconds(e.daily.data[t].sunriseTime+3600*e.offset),document.querySelector("#sunr").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/sunset.svg",void 0===e.daily.data[0].sunsetTime?document.querySelector("#suns").innerHTML=localization[i].undefined:document.querySelector("#suns").innerHTML=localization[i].suns+convertSeconds(e.daily.data[t].sunsetTime+3600*e.offset),document.querySelector("#suns").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/pressure.svg",document.querySelector("#pres").innerHTML=localization[i].pres+e.daily.data[t].pressure+localization[i].units[l].pres_units,document.querySelector("#pres").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/humidity.svg",document.querySelector("#hum").innerHTML=localization[i].hum+": "+Math.round(100*e.daily.data[t].humidity)+"%",document.querySelector("#hum").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/dewpoint.svg",document.querySelector("#dew").innerHTML=localization[i].dwp+": "+Math.round(e.daily.data[t].dewPoint)+localization[i].units[l].temp,document.querySelector("#dew").prepend(a),console.log("to graphs: ",1e3*t),m(1e3*t),g("temperature","rgb(255, 81, 81)","rgba(255, 81, 81, 0.25)",localization[i].units[l].temp,1e3*t)}let T=document.getElementsByClassName("day");for(let e=0;e<T.length-1;e++)T[e].addEventListener("click",()=>{z(8-n+e)})}}else load_text[0].innerHTML=localization.ru.geo_error,load_text[1].innerHTML=localization.en.geo_error}load_text[0].innerHTML=localization.ru.loading,load_text[1].innerHTML=localization.en.loading,setTimeout(()=>{null!=load_text[0]&&(load_text[0].innerHTML=localization.ru.not_load,load_text[1].innerHTML=localization.en.not_load)},5e3),window.onscroll=()=>{0==window.matchMedia("(max-width: 1000px)").matches?window.pageYOffset>document.documentElement.clientHeight?document.getElementsByClassName("anchor_wrapper")[0].classList.remove("hide_anchor"):document.getElementsByClassName("anchor_wrapper")[0].classList.add("hide_anchor"):window.pageYOffset>document.documentElement.clientHeight?document.getElementsByClassName("anchor_wrapper")[0].classList.add("hide_anchor"):document.getElementsByClassName("anchor_wrapper")[0].classList.remove("hide_anchor")},window.onload=loaded(),document.getElementById("location").onclick=()=>{localStorage.removeItem("cached_data"),localStorage.location="on",loaded(localStorage)},document.getElementsByClassName("updating")[0].onclick=()=>{localStorage.removeItem("cached_data"),loaded(localStorage),document.getElementsByClassName("updating")[0].classList.toggle("updating_closed")},document.getElementsByClassName("updating_footer")[0].onclick=()=>{localStorage.removeItem("cached_data"),loaded(localStorage),0==document.getElementsByClassName("updating")[0].classList.contains("updating_closed")&&document.getElementsByClassName("updating")[0].classList.toggle("updating_closed")};