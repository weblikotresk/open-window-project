function seasonsCheck(e){let t=100;for(let o=0;o<e.daily.data.length;o++)"si"!=e.flags.units?5*(e.daily.data[o].temperatureHigh-32)/9<t&&(t=5*(e.daily.data[o].temperatureHigh-32)/9):e.daily.data[o].temperatureHigh<t&&(t=e.daily.data[o].temperatureHigh);return t<15&&t>5?"-autumn":t<=5?"-winter":t>=15&&t<20?"-spring":""}function snowCheck(e,t){return e.summary==undefined||"404: Something has gone wrong.."==e.summary?(e.summary="404: Something has gone wrong..",!1):e.precipType==undefined&&"fog"==e.icon&&(e.summary.includes("Туман")||e.summary.includes("туман")||e.summary.includes("Fog")||e.summary.includes("fog"))?"cloudy":!!((t.includes("hourly")||t.includes("daily")||t.includes("currently"))&&"snow"==e.precipType&&(e.summary.includes("Туман")||e.summary.includes("туман")||e.summary.includes("Fog")||e.summary.includes("fog")||"fog"==e.icon)&&100*e.humidity<99)||!("hourlysumm"!=t&&"dailysumm"!=t||!(e.summary.includes("Туман")||e.summary.includes("туман")||e.summary.includes("Fog")||e.summary.includes("fog"))||"snow"!=e.icon)}function fogToSnow(e,t){return e.includes("Туман")?e.replace("Туман","Снег"):e.includes("туман")?e.replace("туман","снег"):"ru"==t?e.replace(".",",")+" возможен снег.":e.replace("Foggy","It may snow")}function convertSeconds(e){let t=new Date;return t.setTime(1e3*e),t.toISOString().slice(11,16)}function windIntensity(e,t,o){switch(o){case"us":case"uk2":e/=2;break;case"ca":e/=3.6}return e<=.2?localization[t].windIntensity.calm:.2<e&&e<=1.5?localization[t].windIntensity.light:1.5<e&&e<=3.3?localization[t].windIntensity.breeze:3.3<e&&e<=5.4?localization[t].windIntensity.gbreeze:5.4<e&&e<=7.9?localization[t].windIntensity.moderate:7.9<e&&e<=10.7?localization[t].windIntensity.fresh:10.7<e&&e<=13.8?localization[t].windIntensity.strong:13.8<e&&e<=17.1?localization[t].windIntensity.high:17.1<e&&e<=20.7?localization[t].windIntensity.gale:20.7<e&&e<=24.4?localization[t].windIntensity.sgale:24.4<e&&e<=28.4?localization[t].windIntensity.storm:28.4<e&&e<=32.6?localization[t].windIntensity.vstorm:localization[t].windIntensity.hurricane}function videoBack(e,t){let o,n=(new Date).getHours();if(o="clear-day"==e||"rain"==e?seasonsCheck(t):"","vid"!=localStorage.back){(n<=18||n<=5)&&"snow"==e&&(e+="_n"),document.querySelector("#videoBG").remove();let t=document.createElement("img");t.src=`https://d3aid59h00lu28.cloudfront.net/img/back/${e+o}.png`,t.id="videoBG",t.crossOrigin="anonymous",document.body.prepend(t)}else if(null!=document.querySelector("#videoBG > source")){let t=document.createElement("video");t.setAttribute("autoplay",!0),t.setAttribute("muted",!0),t.setAttribute("loop",!0),t.setAttribute("poster",`https://d3aid59h00lu28.cloudfront.net/img/back/${e+o}.png`),t.id="videoBG",t.classList.add("no_opacity");let n=document.createElement("source");n.src=`https://d3aid59h00lu28.cloudfront.net/videos/${e+o}.mp4`,n.type="video/mp4",n.crossOrigin="anonymous",t.appendChild(n);let a=document.createElement("source");a.src=`https://d3aid59h00lu28.cloudfront.net/videos/webm/${e+o}.webm`,a.type="video/webm",a.crossOrigin="anonymous",t.appendChild(a),document.querySelector("#videoBG").classList.add("no_opacity"),setTimeout((()=>{document.querySelector("#videoBG").classList.remove("full_opacity"),document.querySelector("#videoBG").remove(),document.body.prepend(t),document.querySelector("#videoBG").classList.add("full_opacity"),setTimeout((()=>document.querySelector("#videoBG").classList.remove("no_opacity")),400)}),400)}else{let t=document.createElement("source");t.src=`https://d3aid59h00lu28.cloudfront.net/videos/${e+o}.mp4`,t.type="video/mp4",t.crossOrigin="anonymous";let n=document.createElement("source");n.src=`https://d3aid59h00lu28.cloudfront.net/videos/webm/${e+o}.webm`,n.type="video/webm",n.crossOrigin="anonymous",document.querySelector("#videoBG").appendChild(t),document.querySelector("#videoBG").appendChild(n),document.querySelector("#videoBG").classList.add("full_opacity"),setTimeout((()=>document.querySelector("#videoBG").classList.remove("no_opacity")),400)}}function summaries(e,t){let o="";o="daily"==t?"days_slider":"hours","fog"==e[t].icon&&snowCheck(e[t],"hourlysumm")&&(e[t].icon="snow",e[t].summary=fogToSnow(e[t].summary,localStorage.lang)),document.querySelector(`#${t}_summary`)==undefined?document.querySelector(`#${o}`).insertAdjacentHTML("beforebegin",`\n    <div id="${t}_summary">\n      <img class="summary_img" alt="${e[t].icon}" crossorigin="anonymous" width="45px" height="45px" src="https://d3aid59h00lu28.cloudfront.net/img/icons/${e[t].icon}.svg">\n      <span>${e[t].summary}</span>\n    </div>\n    `):("daily"==t?document.getElementsByClassName("summary_img")[1].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${e[t].icon}.svg`:document.getElementsByClassName("summary_img")[0].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${e[t].icon}.svg`,document.querySelector(`#${t}_summary > span`).innerHTML=e[t].summary)}function getCardinalDirection(e,t){return t[Math.floor(e/45+.5)%8]}function cityName(e){if(null==document.querySelector(".city")){let t=document.createElement("span");t.classList.add("city"),""==e.city?t.innerHTML=e.locality+", "+e.countryName:t.innerHTML=e.city+", "+e.countryName,document.getElementById("current").append(t)}else""==e.city?document.querySelector(".city").innerHTML=e.locality+", "+e.countryName:document.querySelector(".city").innerHTML=e.city+", "+e.countryName}function isCache(){let e=new Date;e=e.getTime();let t=localStorage.getItem("cached_data");return t=JSON.parse(t),console.log(t),null==t||e>1e3*t[0].daily.data[6].time?[!1]:[!0,e,t]}async function getWeather(e,t,o,n,a){let i=isCache(),s=i[2],l=i[1];const r=`weather/${e},${t}/${o}/${n}`,c={method:"GET",withCredentials:!0,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}};if(0==i[0]||a.locality!=s[1].locality){console.log("after 6 days");const e=await fetch(r,c);return[await e.json(),a,8,169]}if(l-1e3*s[0].currently.time>288e5){document.getElementsByClassName("updating")[0].classList.toggle("updating_closed");let e=Math.round((1e3*s[0].daily.data[7].time-l)/864e5)+1,t=Math.round((1e3*s[0].daily.data[7].time-l)/36e5);return console.log("before 6 days, but after 8 hours",t),[s[0],s[1],e,t]}if(l-1e3*s[0].currently.time<288e5){let e=Math.round((1e3*s[0].daily.data[7].time-l)/864e5)+1,t=Math.round((1e3*s[0].hourly.data[168].time-l)/36e5)+1;return console.log("before 8 hours",e),[s[0],s[1],e,t]}}window.mobileAndTabletCheck=function(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},window.onscroll=()=>{0==window.matchMedia("(max-width: 1000px)").matches?window.pageYOffset>document.documentElement.clientHeight?document.getElementsByClassName("anchor_wrapper")[0].classList.remove("hide_anchor"):document.getElementsByClassName("anchor_wrapper")[0].classList.add("hide_anchor"):window.pageYOffset>document.documentElement.clientHeight?document.getElementsByClassName("anchor_wrapper")[0].classList.add("hide_anchor"):document.getElementsByClassName("anchor_wrapper")[0].classList.remove("hide_anchor")};let localization={ru:{app_temp:"Ощущается как: ",pop:"Вероятность осадков",uv:"Интенсивность УФ ",uvint:"Интенсивность УФ: ",clouds:"Облачное покрытие",temp:"Температура",wind:"Ветер",sunr:"Рассвет: ",suns:"Закат: ",pres:"Давление: ",hum:"Влажность",dwp:"Точка росы",date:"DD.MM",curr:"Текущая погода",local:"Язык",uni:"Единицы измерения",back:"Фон",back_p:"Эта опция позволяет вам выбрать фон сайта. Фон-изображение может заметно сократить время загрузки.",img:"Изображение",vid:"Видео",source:"Источники",tochange:"Чтобы подвердить изменения, закройте окно настроек. Страница автоматически перезагрузится.",loading:"Страница загружается, пожалуйста, подождите.",not_load:"Если страница долго не загружается, проверьте, включена ли геолокация на вашем устройстве и разрешено ли её использование на этом сайте.",geo_error:"Версия вашего браузера не поддерживает функцию передачи геолокации сторонним сайтам. Обновите его до последней версии и попробуйте снова.",wind_dir_h:"Направление ветра<br><span>(только для мобильных устройств)</span>",wind_dir:"Эта функция включает автопозиционирование стрелки, которая показывает направление ветра относительно Северного полюса.<br> Может работать не на всех устройствах.<br> Если ваш компас работает некорректно, откалибруйте его в Google/Apple Maps.",directions:["С","СВ","В","ЮВ","Ю","ЮЗ","З","СЗ"],on:"Включить",off:"Выключить",compass_error:"Ваш браузер не поддерживает получение данных компаса. Пожалуйста, обновите его до последней версии и попробуйте снова.",compass_f:"Сервис не смог получить информацию компаса. Обновите ваш браузер до последней версии и попробуйте снова.",city_label:"Поиск городов:",search_place:"Название города...",not_found:"По вашему запросу ничего не было найдено. Пожалуйста, попробуйте ещё раз.",undefined:"Не определено (полярный день/ночь)",updated:"Ваши данные на ",refresh:'Обновить \n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" class=\'refresh_icon\' x="0px" y="0px" viewBox="0 0 489.711 489.711" style="enable-background:new 0 0 489.711 489.711;" xml:space="preserve">\n<g>\n\t<g>\n\t\t<path d="M112.156,97.111c72.3-65.4,180.5-66.4,253.8-6.7l-58.1,2.2c-7.5,0.3-13.3,6.5-13,14c0.3,7.3,6.3,13,13.5,13    c0.2,0,0.3,0,0.5,0l89.2-3.3c7.3-0.3,13-6.2,13-13.5v-1c0-0.2,0-0.3,0-0.5v-0.1l0,0l-3.3-88.2c-0.3-7.5-6.6-13.3-14-13    c-7.5,0.3-13.3,6.5-13,14l2.1,55.3c-36.3-29.7-81-46.9-128.8-49.3c-59.2-3-116.1,17.3-160,57.1c-60.4,54.7-86,137.9-66.8,217.1    c1.5,6.2,7,10.3,13.1,10.3c1.1,0,2.1-0.1,3.2-0.4c7.2-1.8,11.7-9.1,9.9-16.3C36.656,218.211,59.056,145.111,112.156,97.111z"/>\n\t\t<path d="M462.456,195.511c-1.8-7.2-9.1-11.7-16.3-9.9c-7.2,1.8-11.7,9.1-9.9,16.3c16.9,69.6-5.6,142.7-58.7,190.7    c-37.3,33.7-84.1,50.3-130.7,50.3c-44.5,0-88.9-15.1-124.7-44.9l58.8-5.3c7.4-0.7,12.9-7.2,12.2-14.7s-7.2-12.9-14.7-12.2l-88.9,8    c-7.4,0.7-12.9,7.2-12.2,14.7l8,88.9c0.6,7,6.5,12.3,13.4,12.3c0.4,0,0.8,0,1.2-0.1c7.4-0.7,12.9-7.2,12.2-14.7l-4.8-54.1    c36.3,29.4,80.8,46.5,128.3,48.9c3.8,0.2,7.6,0.3,11.3,0.3c55.1,0,107.5-20.2,148.7-57.4    C456.056,357.911,481.656,274.811,462.456,195.511z"/>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n    ',details:"Рассвет/закат, точка росы, давление и др.",details_hide:"Скрыть",Mon:"Пн,",Tue:"Вт,",Wed:"Ср,",Thu:"Чт,",Fri:"Пт,",Sat:"Сб,",Sun:"Вс,",units:{us:{temp:"°F",wind_units:"ми/ч",pres_units:" мм рт.ст."},ca:{temp:"°C",wind_units:"км/ч",pres_units:" мм рт.ст."},si:{temp:"°C",wind_units:"м/с",pres_units:" мм рт.ст."},uk2:{temp:"°C",wind_units:"ми/ч",pres_units:" мм рт.ст."}},windIntensity:{calm:"Штиль, ",light:"Тихий, ",breeze:"Лёгкий, ",gbreeze:"Слабый, ",moderate:"Умеренный, ",fresh:"Свежий, ",strong:"Сильный, ",high:"Крепкий, ",gale:"Очень крепкий, ",sgale:"Шторм, ",storm:"Сильный шторм, ",vstorm:"Жестокий шторм, ",hurricane:"Ураган, "},tooltips:["Здесь вы можете настроить сайт согласно вашим предпочтениям: изменить язык, единицы измерения и т.д.","Нажав на любую из этих иконок, вы сможете увидеть прогноз погоды в данный день."]},en:{app_temp:"Feels like: ",pop:"Precipation",uvint:"UV intensity: ",uv:"UV",temp:"Temparature",clouds:"Cloud coverage",wind:"Wind",sunr:"Sunrise: ",suns:"Sunset: ",pres:"Pressure: ",hum:"Humidity",dwp:"Dew point",date:"MM.DD",curr:"Current mode",local:"Language",uni:"Units of measurements",back:"Background",back_p:"This option lets you choose your background. Consider using image background if the website takes too long to load.",img:"Image",vid:"Video",source:"Sources",tochange:"Close the settings window to confirm the changes. The page will automatically reload.",geo_error:"Your browser version does not support the function of transferring geolocation to third-party sites. Please update it to the latest version and try again.",wind_dir_h:"Wind direction<br><span>(only for mobile devices)</span>",wind_dir:"This function enables auto-positioning of the wind arrow relative to the North Pole.<br> May not work on every device.<br> If the compass doesn't work correctly, consider recalibrate it in the Google/Apple Maps.",directions:["N","NE","E","SE","S","SW","W","NW"],on:"On",off:"Off",compass_error:"Compass heading is not available in your browser. Consider update it to the last version and try again.",compass_f:"Could not retrieve absolute orientation. Consider update your browser to the last version and try again.",city_label:"Global forecast:",search_place:"City name...",not_found:"Nothing has been found. Please, try again.",undefined:"Undefined (polar day/night)",updated:"Your data is on ",refresh:'Update  \n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" class=\'refresh_icon\' x="0px" y="0px" viewBox="0 0 489.711 489.711" style="enable-background:new 0 0 489.711 489.711;" xml:space="preserve">\n<g>\n\t<g>\n\t\t<path d="M112.156,97.111c72.3-65.4,180.5-66.4,253.8-6.7l-58.1,2.2c-7.5,0.3-13.3,6.5-13,14c0.3,7.3,6.3,13,13.5,13    c0.2,0,0.3,0,0.5,0l89.2-3.3c7.3-0.3,13-6.2,13-13.5v-1c0-0.2,0-0.3,0-0.5v-0.1l0,0l-3.3-88.2c-0.3-7.5-6.6-13.3-14-13    c-7.5,0.3-13.3,6.5-13,14l2.1,55.3c-36.3-29.7-81-46.9-128.8-49.3c-59.2-3-116.1,17.3-160,57.1c-60.4,54.7-86,137.9-66.8,217.1    c1.5,6.2,7,10.3,13.1,10.3c1.1,0,2.1-0.1,3.2-0.4c7.2-1.8,11.7-9.1,9.9-16.3C36.656,218.211,59.056,145.111,112.156,97.111z"/>\n\t\t<path d="M462.456,195.511c-1.8-7.2-9.1-11.7-16.3-9.9c-7.2,1.8-11.7,9.1-9.9,16.3c16.9,69.6-5.6,142.7-58.7,190.7    c-37.3,33.7-84.1,50.3-130.7,50.3c-44.5,0-88.9-15.1-124.7-44.9l58.8-5.3c7.4-0.7,12.9-7.2,12.2-14.7s-7.2-12.9-14.7-12.2l-88.9,8    c-7.4,0.7-12.9,7.2-12.2,14.7l8,88.9c0.6,7,6.5,12.3,13.4,12.3c0.4,0,0.8,0,1.2-0.1c7.4-0.7,12.9-7.2,12.2-14.7l-4.8-54.1    c36.3,29.4,80.8,46.5,128.3,48.9c3.8,0.2,7.6,0.3,11.3,0.3c55.1,0,107.5-20.2,148.7-57.4    C456.056,357.911,481.656,274.811,462.456,195.511z"/>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n    ',details:"Sunrise/sunset, dew point, pressure and more.",details_hide:"Hide",Mon:"Mon,",Tue:"Tue,",Wed:"Wed,",Thu:"Thu,",Fri:"Fri,",Sat:"Sat,",Sun:"Sun,",loading:"Your page is loading, please wait.",not_load:"If page takes a long time loading, please, consider checking if your geolocation service is on and allowed for use on this site.",units:{us:{temp:"°F",wind_units:"mph",pres_units:" mb"},ca:{temp:"°C",wind_units:"km/h",pres_units:" mb"},si:{temp:"°C",wind_units:"m/s",pres_units:" mb"},uk2:{temp:"°C",wind_units:"mph",pres_units:" mb"}},windIntensity:{calm:"Calm, ",light:"Light air, ",breeze:"Light breeze, ",gbreeze:"Gentle breeze, ",moderate:"Moderate breeze, ",fresh:"Fresh breeze, ",strong:"Strong breeze, ",high:"High wind, ",gale:"Gale, ",sgale:"Strong gale, ",storm:"Storm, ",vstorm:"Violent storm, ",hurricane:"Hurricane, "},tooltips:["Here you can customize the site according to your preferences: change the language, units of measurement, etc.","If you click on any of these icons, you will see the weather forecast for that day."]}},settingsIcon=document.querySelector("#settings > svg"),closeBtn=document.getElementById("close_settings"),lat="37.42158889770508",lon="-122.08370208740234",searchIcon=document.querySelector("#search > img"),closeSearch=document.querySelector("#close_search");localStorage.tools==undefined&&(localStorage.lang="ru",localStorage.units="si",localStorage.wind="off",localStorage.back="vid",localStorage.location="off",localStorage.tools="true",window.mobileAndTabletCheck()&&(localStorage.wind="on"));let settingsInputs=[];settingsInputs[0]=document.querySelectorAll(".lang"),settingsInputs[1]=document.querySelectorAll(".units"),settingsInputs[2]=document.querySelectorAll(".wind-input"),settingsInputs[3]=document.querySelectorAll(".back-input");for(let e=0;e<settingsInputs[0].length;e++)localStorage.lang==settingsInputs[0][e].value&&(settingsInputs[0][e].checked=!0),settingsInputs[0][e].addEventListener("click",(()=>{localStorage.lang=settingsInputs[0][e].value}));for(let e=0;e<settingsInputs[1].length;e++)localStorage.units==settingsInputs[1][e].value&&(settingsInputs[1][e].checked=!0),settingsInputs[1][e].addEventListener("click",(()=>{localStorage.units=settingsInputs[1][e].value}));for(let e=0;e<settingsInputs[2].length;e++)localStorage.wind==settingsInputs[2][e].value&&(settingsInputs[2][e].checked=!0),settingsInputs[2][e].addEventListener("click",(()=>{localStorage.wind=settingsInputs[2][e].value}));for(let e=0;e<settingsInputs[3].length;e++)localStorage.back==settingsInputs[3][e].value&&(settingsInputs[3][e].checked=!0),settingsInputs[3][e].addEventListener("click",(()=>{localStorage.back=settingsInputs[3][e].value}));settingsIcon.addEventListener("click",(()=>{document.getElementsByClassName("settings_window")[0].style.zIndex=2,document.getElementsByClassName("settings_window")[0].style.clipPath="circle(100%)"})),closeBtn.addEventListener("click",(()=>{document.getElementsByClassName("settings_window")[0].style.clipPath="circle(0.1% at 53.6% 2.2%)",setTimeout((()=>(document.getElementsByClassName("settings_window")[0].style.zIndex=-2,localStorage.removeItem("cached_data"),location.reload(),!1)),550)})),searchIcon.addEventListener("click",(()=>{document.getElementsByClassName("search_window")[0].style.zIndex=5,document.getElementsByClassName("search_window")[0].style.clipPath="circle(200%)"})),closeSearch.addEventListener("click",(()=>{document.getElementsByClassName("search_window")[0].style.clipPath="circle(0.1% at 55.6% 28.2%)",setTimeout((()=>(document.getElementsByClassName("search_window")[0].style.zIndex=-5,!1)),550)}));let load_text=document.getElementsByClassName("loading_support");function loaded(e=localStorage,t){let o;if(localStorage!=e&&(e=localStorage),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)}))})),"geolocation"in navigator){let s,l=e.lang,r=e.units,c=document.getElementById("city_input"),d=!0,u=[],m=isCache();function n(e,t){var o,n=document.getElementsByClassName(e),a=0;for(o=0;o<n.length;o++)n[o].onmouseover=function(e){return function(){n[a].style.backgroundColor="",n[a=e].style.backgroundColor="#68F"}}(o);n[a].style.backgroundColor="#68F",document.getElementById(t).onkeydown=function(e){var o=0;if("ArrowUp"==e.key)o=-1;else if("ArrowDown"==e.key)o=1;else{if("Enter"!=e.key)return;n[a].click(),document.getElementById(t).focus()}n[a].style.backgroundColor="",a=(a=(a+o)%n.length)<0?n.length+a:a,n[a].style.backgroundColor="#68F"}}function a(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){let o;fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${t.coords.latitude}&longitude=${t.coords.longitude}&localityLanguage=${l}`).then((e=>e.json())).then((n=>{o=n,e([t.coords.latitude,t.coords.longitude,l,r,o])}))}))}))}if(c.setAttribute("placeholder",localization[l].search_place),c.oninput=function(){fetch(`https://api.teleport.org/api/cities/?search=${c.value}&limit=8`).then((e=>e.json())).then((e=>{if(0==e.count||" "==c.value){let e=document.querySelectorAll(".auto_item"),t=document.createElement("div");t.className="auto_wrapper",document.getElementsByClassName("search_window")[0].append(t);for(let n=0;n<e.length;n++)e[n].remove();document.querySelector(".not_found")!=undefined&&document.querySelector(".not_found").remove(),u=[];let o=document.createElement("span");o.className="not_found",o.innerHTML=localization[l].not_found,document.querySelector(".auto_wrapper").append(o)}else if(d&&" "!=c.value&&""!=c.value){document.querySelector(".not_found")!=undefined&&document.querySelector(".not_found").remove();let t=document.createElement("div");t.className="auto_wrapper",document.getElementsByClassName("search_window")[0].append(t),d=!1;for(let o=0;o<e._embedded["city:search-results"].length;o++){u[o]=e._embedded["city:search-results"][o].matching_full_name,document.querySelector(".auto_wrapper").insertAdjacentHTML("beforeend",`\n                <input type='radio' name='search_res' id='search_${o}'>\n                <label for='search_${o}'><span class='auto_item'>${u[o]}</span></label>`),document.getElementById(`search_${o}`).onclick=()=>{fetch(e._embedded["city:search-results"][o]._links["city:item"].href).then((e=>e.json())).then((e=>{fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e.location.latlon.latitude}&longitude=${e.location.latlon.longitude}&localityLanguage=${l}`).then((e=>e.json())).then((t=>{s=getWeather(e.location.latlon.latitude,e.location.latlon.longitude,l,r,t),s.then((e=>{console.log(e),document.getElementsByClassName("search_window")[0].style.clipPath="circle(0.1% at 53.6% 6.2%)",setTimeout((()=>(document.getElementsByClassName("search_window")[0].style.zIndex=-5,!1)),550),i(e),cityName(e[1])}))}))}))}}n("auto_item","city_input")}else if(""!=c.value&&" "!=c.value){document.querySelector(".not_found")!=undefined&&document.querySelector(".not_found").remove();let t=document.querySelectorAll(".auto_item");for(let e=0;e<t.length;e++)t[e].remove();u=[];for(let o=0;o<e._embedded["city:search-results"].length;o++){u[o]=e._embedded["city:search-results"][o].matching_full_name,document.querySelector(".auto_wrapper").insertAdjacentHTML("beforeend",`\n                  <input type='radio' name='search_res' id='search_${o}'>\n                  <label for='search_${o}'><span class='auto_item'>${u[o]}</span></label>`),document.getElementById(`search_${o}`).onclick=()=>{fetch(e._embedded["city:search-results"][o]._links["city:item"].href).then((e=>e.json())).then((e=>{fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e.location.latlon.latitude}&longitude=${e.location.latlon.longitude}&localityLanguage=${l}`).then((e=>e.json())).then((t=>{s=getWeather(e.location.latlon.latitude,e.location.latlon.longitude,l,r,t),s.then((e=>{document.getElementsByClassName("search_window")[0].style.clipPath="circle(0.1% at 53.6% 6.2%)",setTimeout((()=>(document.getElementsByClassName("search_window")[0].style.zIndex=-5,!1)),550),console.log(e),i(e),cityName(e[1])}))}))}))}}n("auto_item","city_input")}else document.querySelector(".auto_wrapper")!=undefined&&document.querySelector(".auto_wrapper").remove(),d=!0}))},"off"==localStorage.location||t!=undefined)t!=undefined&&(lat=t[0],lon=t[1]),fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=${l}`).then((e=>e.json())).then((e=>{o=getWeather(lat,lon,l,r,e),o.then((e=>{cityName(e[1]),i(e)}))}));else if(m[0]){let e=m[2],t=m[1];if(t-1e3*e[0].currently.time>288e5){document.getElementsByClassName("updating")[0].classList.toggle("updating_closed");let o=Math.round((1e3*e[0].daily.data[7].time-t)/864e5)+1,n=Math.round((1e3*e[0].hourly.data[168].time-t)/36e5)+1;console.log("before 6 days, but after 8 hours",n),cityName(e[1]),i([e[0],e[1],o,n])}else{let o=Math.round((1e3*e[0].daily.data[7].time-t)/864e5)+2,n=Math.round((1e3*e[0].hourly.data[168].time-t)/36e5)+1;console.log("before 8 hours",o),cityName(e[1]),i([e[0],e[1],o,n])}}else undefined,o=a().then((e=>getWeather(e[0],e[1],e[2],e[3],e[4]))),o.then((e=>{cityName(e[1]),i(e)}));function i(e){localStorage.setItem("cached_data",JSON.stringify(e));let t=e[1],o=e[2],n=e[3],a=convertSeconds((e=e[0]).currently.time+3600*e.offset),i=moment(1e3*e.currently.time);function s(t){var o;"currently"==c?(t.absolute?o=t.alpha:t.hasOwnProperty("webkitCompassHeading")?o=360-t.webkitCompassHeading:(console.log("Could not retrieve absolute orientation"),o=e[c].windBearing+45),o=o+225-e[c].windBearing,document.querySelector(".wind_dir").style.transform=`rotate(${o}deg)`):(o=(o=t.absolute?360-t.alpha:t.hasOwnProperty("webkitCompassHeading")?360-t.webkitCompassHeading:c.windBearing+45)+225-c.windBearing,document.querySelector(".wind_dir").style.transform=`rotate(${o}deg)`)}document.getElementsByClassName("updating")[0].innerHTML=`\n      <span>${localization[l].updated}${a}, ${i.format("DD[.]MM[.]YYYY")}</span>\n      <span>${localization[l].refresh}</span>\n      `,document.getElementsByClassName("updating_footer")[0].innerHTML=`\n      <span>${localization[l].updated}${a}, ${i.format("DD[.]MM[.]YYYY")}</span>\n      <span>${localization[l].refresh}</span>\n      `,console.log(t,e);let c="currently";function d(t,o){c=t,c="currently"!=c?e[c].data[o]:e[c],"ondeviceorientationabsolute"in window&&"on"==localStorage.wind?window.addEventListener("deviceorientationabsolute",s):"ondeviceorientation"in window&&"on"==localStorage.wind?window.addEventListener("deviceorientation",s):"off"==localStorage.wind||localStorage.wind==undefined?(window.removeEventListener("deviceorientationabsolute",s),window.removeEventListener("deviceorientation",s),setTimeout((()=>document.querySelector(".wind_dir").style.transform=`rotate(${c.windBearing+225}deg)`),1e3)):(alert(localization[l].compass_error),document.querySelector(".wind_dir").style.transform=`rotate(${c.windBearing+225}deg)`)}function u(e,t){switch(e){case"temp":g("temperature","rgb(255, 81, 81)","rgba(255, 81, 81, 0.25)",localization[l].units[r].temp,t);break;case"wind":g("windSpeed","rgb(0,204,255)","rgba(0,204,255, 0.25)",localization[l].units[r].wind_units,t);break;case"humidity":g("humidity","rgb(0,238,255)","rgba(0,238,255, 0.25)","%",t);break;case"uv":g("uvIndex","rgb(163,78,233)","rgba(163,78,233, 0.25)","",t);break;case"clouds":g("cloudCover","rgb(104,231,142)","rgba(104,231,142, 0.25)","%",t);break;case"precipProbability":g("precipProbability","rgb(0, 119, 255)","rgba(0, 119, 255, 0.25)","%",t)}}function m(e){let t=document.getElementsByClassName("slide-toggle");t[0].checked=!0,function(){let e=document.getElementById("slidemenu"),t=e.cloneNode(!0);e.remove(),document.getElementById("display").appendChild(t)}();for(let o=0;o<t.length;o++)t[o].addEventListener("click",(()=>{u(t[o].value,e)}))}let p=document.createElement("img");function g(t,o,n,a,i){document.getElementById("myChart").remove();let s=document.createElement("canvas");s.id="myChart",document.getElementsByClassName("chart-container")[0].append(s);let c=function(t,o){let n=!0,a=[],i=0,s=[];if(n=null==document.querySelector(".hour"),t<1e3&&0!=t){let c=0;for(let d=t;d<t+24;d++){a[c]="cloudCover"==o||"humidity"==o||"precipProbability"==o?Math.round(100*e.hourly.data[d][o]):Math.round(e.hourly.data[d][o]);let t=p.cloneNode(!0),u=e.hourly.data[d].icon;"cloudy"==snowCheck(e.hourly.data[d],"hourly")?u="cloudy":snowCheck(e.hourly.data[d],"hourly")&&"fog"==u&&(u="snow"),n?(document.querySelector("#hours").insertAdjacentHTML("beforeend",`\n              <div class="hour">\n                <div class="pop">${Math.round(100*e.hourly.data[d].precipProbability)}%</div>\n                    <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${u}.svg" crossorigin="anonymous" alt="${u}" width="60px" height="60px" class="sky">\n                    <div class="temp">${Math.round(e.hourly.data[d].temperature)+localization[l].units[r].temp}</div>\n                    <div class="time">${convertSeconds(e.hourly.data[d].time+3600*e.offset)}</div>\n              </div>\n              `),document.querySelectorAll(".hour > .pop")[c].prepend(t),c++):(document.querySelectorAll(".hour > .pop")[c].innerHTML=Math.round(100*e.hourly.data[d].precipProbability)+"%",document.querySelectorAll(".hour > .temp")[c].innerHTML=Math.round(e.hourly.data[d].temperature)+localization[l].units[r].temp,document.querySelectorAll(".hour > .sky")[c].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${u}.svg`,document.querySelectorAll(".hour > .time")[c].innerHTML=convertSeconds(e.hourly.data[d].time+3600*e.offset),document.querySelectorAll(".hour > .pop")[c].prepend(t),c++),s[c-1]=convertSeconds(e.hourly.data[d].time+3600*e.offset),i<a[c-1]&&(i=a[c-1])}}else if(0==t)for(let c=0;c<24;c++){let t=e.hourly.data[c].icon;"cloudy"==snowCheck(e.hourly.data[c],"hourly")?t="cloudy":snowCheck(e.hourly.data[c],"hourly")&&"fog"==t&&(t="snow");let d=p.cloneNode(!0);n?(document.querySelector("#hours").insertAdjacentHTML("beforeend",`\n                  <div class="hour">\n                    <div class="pop">${Math.round(100*e.hourly.data[c].precipProbability)}%</div>\n                        <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${t}.svg" crossorigin="anonymous" alt="${t}" width="60px" height="60px" class="sky">\n                        <div class="temp">${Math.round(e.hourly.data[c].temperature)+localization[l].units[r].temp}</div>\n                        <div class="time">${convertSeconds(e.hourly.data[c].time+3600*e.offset)}</div>\n                  </div>\n                  `),document.querySelectorAll(".hour > .pop")[c].prepend(d)):(document.querySelectorAll(".hour > .pop")[c].innerHTML=Math.round(100*e.hourly.data[c].precipProbability)+"%",document.querySelectorAll(".hour > .temp")[c].innerHTML=Math.round(e.hourly.data[c].temperature)+localization[l].units[r].temp,document.querySelectorAll(".hour > .sky")[c].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${t}.svg`,document.querySelectorAll(".hour > .time")[c].innerHTML=convertSeconds(e.hourly.data[c].time+3600*e.offset),document.querySelectorAll(".hour > .pop")[c].prepend(d)),a[c]="cloudCover"==o||"humidity"==o||"precipProbability"==o?Math.round(100*e.hourly.data[c][o]):Math.round(e.hourly.data[c][o]),s[c]=convertSeconds(e.hourly.data[c].time+3600*e.offset),i<a[c]&&(i=a[c])}else if(t>=1e3)for(let c=t/=1e3;c<e.hourly.data.length;c++)if(e.hourly.data[c].time==e.daily.data[t].time)for(let t=0;t<24;t++){let d=e.hourly.data[c+t].icon;"cloudy"==snowCheck(e.hourly.data[c+t],"hourly")?d="cloudy":snowCheck(e.hourly.data[c+t],"hourly")&&"fog"==d&&(d="snow");let u=p.cloneNode(!0);n?(document.querySelector("#hours").insertAdjacentHTML("beforeend",`\n                  <div class="hour">\n                    <div class="pop">${Math.round(100*e.hourly.data[c+t].precipProbability)}%</div>\n                        <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${d}.svg" crossorigin="anonymous" alt="${d}" width="60px" height="60px" class="sky">\n                        <div class="temp">${Math.round(e.hourly.data[c+t].temperature)+localization[l].units[r].temp}</div>\n                        <div class="time">${convertSeconds(e.hourly.data[c+t].time+3600*e.offset)}</div>\n                  </div>\n                  `),document.querySelectorAll(".hour > .pop")[t].prepend(u)):(document.querySelectorAll(".hour > .pop")[t].innerHTML=Math.round(100*e.hourly.data[c+t].precipProbability)+"%",document.querySelectorAll(".hour > .temp")[t].innerHTML=Math.round(e.hourly.data[c+t].temperature)+localization[l].units[r].temp,document.querySelectorAll(".hour > .sky")[t].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${d}.svg`,document.querySelectorAll(".hour > .time")[t].innerHTML=convertSeconds(e.hourly.data[c+t].time+3600*e.offset),document.querySelectorAll(".hour > .pop")[t].prepend(u)),a[t]="cloudCover"==o||"humidity"==o||"precipProbability"==o?Math.round(100*e.hourly.data[c+t][o]):Math.round(e.hourly.data[c+t][o]),s[t]=convertSeconds(e.hourly.data[c+t].time+3600*e.offset),i<a[t]&&(i=a[t])}return[a,i,s]}(i,t),d=c[0],u=c[1],m=c[2],g=0;g=u>70?30:3;let y,h,w=document.getElementById("myChart").getContext("2d");if("temperature"==t){y=6,h={blue:"rgb(153, 206, 255)",yellow:"rgb(224, 209, 0)",red:"rgb(255, 99, 51)"};let e=0;for(let t=0;t<d.length;t++)d[t]<0&&e++;e>d.length/2?(n="rgba(56, 75, 243, 0.3)",h={blue:"rgb(56, 75, 243)",yellow:"rgb(33, 214, 250)",red:"rgb(24, 190, 140)"}):n="rgba(255, 81, 81, 0.25)"}else y=3;let v=null;new Chart(w,{type:"line",data:{labels:m,datasets:[{label:"",fill:!0,backgroundColor:n,borderColor:function(e){var n=e.chart.chartArea;if(!n)return null;if("temperature"==t){if(null===v){let t=e.chart.ctx;v=t.createLinearGradient(0,n.bottom,0,n.top),v.addColorStop(0,h.blue),v.addColorStop(.5,h.yellow),v.addColorStop(1,h.red)}}else v=o;return v},data:d,borderWidth:y}]},options:{maintainAspectRatio:!1,onAnimationComplete:function(){myBarChart.showTooltip(bars,!1)},scales:{xAxes:[{gridLines:{color:"rgba(255, 255, 255, 0.25)",zeroLineColor:"rgba(255, 255, 255, 0.25)",drawBorder:!1},ticks:{fontColor:"#fff",fontSize:18}}],yAxes:[{display:!1,gridLines:{color:"rgba(255, 255, 255, 0)",zeroLineColor:"rgba(255, 255, 255, 0.25)"},ticks:{beginAtZero:!0,max:u+g}}]},legend:{display:!1},showAllTooltips:!0,tooltips:{backgroundColor:"rgba(0, 0, 0, 0)",displayColors:!1,bodyFontSize:18,bodyAlign:"center",xPadding:-20,bodyFontFamily:"'Rubik', sans-serif",callbacks:{label:function(e,t){return e.yLabel+a},title:function(){return null}}}}})}p.src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg",p.crossOrigin="anonymous",p.width="13px",p.height="13px",p.className="pop_drop",p.alt="Precip",Chart.pluginService.register({beforeRender:function(e){e.config.options.showAllTooltips&&(e.pluginTooltips=[],e.config.data.datasets.forEach((function(t,o){e.getDatasetMeta(o).data.forEach((function(t,o){e.pluginTooltips.push(new Chart.Tooltip({_chart:e.chart,_chartInstance:e,_data:e.data,_options:e.options.tooltips,_active:[t]},e))}))})),e.options.tooltips.enabled=!1)},afterDraw:function(e,t){if(e.config.options.showAllTooltips){if(!e.allTooltipsOnce){if(1!==t)return;e.allTooltipsOnce=!0}e.options.tooltips.enabled=!0,Chart.helpers.each(e.pluginTooltips,(function(e){e.initialize(),e.update(),e.pivot(),e.transition(t).draw()})),e.options.tooltips.enabled=!1}}});let y=document.querySelectorAll(".settings-item_label > h3");y[0].innerHTML=localization[l].local,y[1].innerHTML=localization[l].uni,y[2].innerHTML=localization[l].wind_dir_h,y[3].innerHTML=localization[l].back,y[4].innerHTML=localization[l].source,document.querySelector(".settings_block > span").innerHTML=localization[l].tochange,document.querySelector(".wind-settings  p").innerHTML=localization[l].wind_dir,document.querySelector(".settings_item  p").innerHTML=localization[l].back_p,document.querySelector("#city_input_label").innerHTML=localization[l].city_label;let h=document.querySelectorAll(".turn_wind");h[0].innerHTML=localization[l].on,h[1].innerHTML=localization[l].off;let w=document.querySelectorAll(".back-label > span");w[0].innerHTML=localization[l].img,w[1].innerHTML=localization[l].vid,document.querySelector("#legal > p> span").innerHTML="2020-"+moment().format("YYYY");let v=document.getElementById("show_details"),f=!1;function b(t){let o=e.currently;t>0&&(o=e.hourly.data[t]);let n=snowCheck(o,"currently");window.matchMedia("(max-width: 700px)").matches&&0==window.matchMedia("(max-width: 550px)").matches?(document.getElementById("details").style.marginTop="-40px",document.getElementById("other").style.marginTop="-40px"):window.matchMedia("(max-width: 550px)").matches&&(document.getElementById("other").style.marginTop="0",document.getElementById("details").style.marginTop="0"),summaries(e,"hourly"),summaries(e,"daily");let a=document.createElement("img"),i=o.icon;n?("fog"==i&&(a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/snow.svg",a.alt="snow",i="snow"),document.querySelector(".condition").innerHTML=fogToSnow(o.summary,localStorage.lang)):(a.alt=o.icon,a.src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${o.icon}.svg`,document.querySelector(".condition").innerHTML=o.summary);let s=moment(1e3*o.time);s=s.format(localization[l].date),videoBack("31.12"==s||"12.31"==s?"NewYear":i,e),a.crossOrigin="anonymous",a.className="icon",a.width="60px",a.height="60px";let c=document.createElement("img");c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg",c.crossOrigin="anonymous",c.alt="",c.className="curr_icon",c.width="30px",c.height="30px",document.querySelector(".temp_val").innerHTML=Math.round(o.temperature)+localization[l].units[r].temp,document.querySelector(".app_temp").innerHTML=localization[l].app_temp+""+Math.round(o.apparentTemperature)+localization[l].units[r].temp,document.querySelector(".condition").prepend(a),document.querySelector(".propability").innerHTML=localization[l].pop+": "+Math.round(100*e.hourly.data[0].precipProbability)+"%",document.querySelector(".propability").prepend(c),c=c.cloneNode(!0),c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/uv.svg",document.querySelector(".uv").innerHTML=localization[l].uvint+o.uvIndex,document.querySelector(".uv").prepend(c),c=c.cloneNode(!0),c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/coverage.svg",document.querySelector(".clouds").innerHTML=localization[l].clouds+": "+Math.round(100*o.cloudCover)+"%",document.querySelector(".clouds").prepend(c),c=c.cloneNode(!0),c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/wind.svg",document.querySelector(".wind_text > h3").innerHTML=localization[l].wind+": ",document.querySelector(".wind_text > h3").prepend(c),document.querySelector(".wind_speed").innerHTML=windIntensity(o.windSpeed,l,r)+getCardinalDirection(o.windBearing,localization[l].directions)+", "+o.windSpeed+" "+localization[l].units[r].wind_units,d("currently"),c=c.cloneNode(!0),c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/sunrise.svg",e.daily.data[0].sunriseTime===undefined?document.querySelector("#sunr").innerHTML=localization[l].undefined:document.querySelector("#sunr").innerHTML=localization[l].sunr+convertSeconds(e.daily.data[0].sunriseTime+3600*e.offset),document.querySelector("#sunr").prepend(c),c=c.cloneNode(!0),c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/sunset.svg",e.daily.data[0].sunsetTime===undefined?document.querySelector("#suns").innerHTML=localization[l].undefined:document.querySelector("#suns").innerHTML=localization[l].suns+convertSeconds(e.daily.data[0].sunsetTime+3600*e.offset),document.querySelector("#suns").prepend(c),c=c.cloneNode(!0),c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/pressure.svg",document.querySelector("#pres").innerHTML=localization[l].pres+o.pressure+localization[l].units[r].pres_units,document.querySelector("#pres").prepend(c),c=c.cloneNode(!0),c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/humidity.svg",document.querySelector("#hum").innerHTML=localization[l].hum+": "+Math.round(100*o.humidity)+"%",document.querySelector("#hum").prepend(c),c=c.cloneNode(!0),c.src="https://d3aid59h00lu28.cloudfront.net/img/icons/dewpoint.svg",document.querySelector("#dew").innerHTML=localization[l].dwp+": "+Math.round(o.dewPoint)+localization[l].units[r].temp,document.querySelector("#dew").prepend(c);let u=document.querySelectorAll("#slidemenu > label > span");u[0].innerHTML=localization[l].temp,u[1].innerHTML=localization[l].wind,u[2].innerHTML=localization[l].hum,u[3].innerHTML=localization[l].uv,u[4].innerHTML=localization[l].clouds,u[5].innerHTML=localization[l].pop,null!=document.getElementsByClassName("backto")[0]&&document.getElementsByClassName("backto")[0].remove(),m(t),g("temperature","rgb(255, 81, 81)","rgba(255, 81, 81, 0.25)",localization[l].units[r].temp,t),document.getElementById("days-fake").checked=!0}v.innerHTML=localization[l].details,v.onclick=()=>{window.matchMedia("(max-width: 550px)").matches&&(document.getElementsByClassName("details_wrap")[0].classList.toggle("details_opened"),f?(f=!1,setTimeout((()=>{document.getElementsByClassName("details_wrap")[0].classList.toggle("details_hide"),v.innerHTML=localization[l].details}),210)):(f=!0,v.innerHTML=localization[l].details_hide,setTimeout((()=>document.getElementsByClassName("details_wrap")[0].classList.toggle("details_hide")),210)))},load_text[0]!=undefined&&(document.getElementsByClassName("loading")[0].remove(),document.getElementById("display").style.opacity="1",document.getElementById("legal").style.opacity="1",document.getElementById("days_wrap").style.opacity="1",document.getElementsByClassName("slider_wrap")[0].style.opacity=1,document.getElementsByClassName("anchor_wrapper")[0].classList.remove("hide_anchor"),"true"==localStorage.tools&&tippy(settingsIcon,{content:localization[l].tooltips[0],theme:"normal",sticky:!0,arrow:!0,showOnCreate:!0,placement:"bottom",delay:500,maxWidth:250,onHidden(e){e.destroy(),window.scrollBy(0,document.body.scrollHeight),tippy(document.getElementsByClassName("day")[0],{content:localization[l].tooltips[1],theme:"normal",sticky:!0,arrow:!0,showOnCreate:!0,placement:"top",delay:500,maxWidth:250,onHidden(e){e.destroy(),localStorage.tools="false"}})}})),b(169-n),o>8&&(o=8);let S=!0;S=8-o==0||null==document.querySelector(".day");let _=document.querySelectorAll(".day");_=_.length,S&&(document.querySelector("#days").innerHTML='<input type="radio" name="days-radio" id="days-fake" class="days_radio" checked="">');for(let T=8-o;T<8;T++){let t=moment(1e3*e.daily.data[T].time),o=e.daily.data[T].icon;if("cloudy"==snowCheck(e.daily.data[T],"daily")?o="cloudy":snowCheck(e.daily.data[T],"daily")&&"fog"==o&&(o="snow"),S)7!=T?document.querySelector("#days").insertAdjacentHTML("beforeend",`\n          <input type="radio" name="days-radio" id="days-${T+1}" class="days_radio">\n          <label for="days-${T+1}" class="day">\n                  <div class="pop">\n                  <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg" crossorigin="anonymous" width="13px" height="13px" alt="Precip" class="pop_drop">${Math.round(100*e.daily.data[T].precipProbability)}%\n                  </div>\n                  <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${o}.svg" crossorigin="anonymous" alt="${o}" width="60px" height="60px" class="sky">\n                  <div class="temp">\n                    <div class="temp_max">\n                      ${Math.round(e.daily.data[T].temperatureMax)}${localization[l].units[r].temp}</div>\n                    <div class="temp_min">\n                      ${Math.round(e.daily.data[T].temperatureMin)}${localization[l].units[r].temp}</div>\n                  </div>\n                  <div class="date">${localization[l][t.format("ddd")]+"<br>"+t.format(localization[l].date)}</div>\n          </label>`):document.querySelector("#days").insertAdjacentHTML("beforeend",`\n            <div class="day">\n              <div class="pop">\n              <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg" crossorigin="anonymous" alt="Precip" width="13px" height="13px" class="pop_drop">${Math.round(100*e.daily.data[T].precipProbability)}%\n              </div>\n              <img src="https://d3aid59h00lu28.cloudfront.net/img/icons/${o}.svg" crossorigin="anonymous" alt="${o}" width="60px" height="60px" class="sky">\n              <div class="temp">\n                <div class="temp_max">\n                  ${Math.round(e.daily.data[T].temperatureMax)}${localization[l].units[r].temp}</div>\n                <div class="temp_min">\n                  ${Math.round(e.daily.data[T].temperatureMin)}${localization[l].units[r].temp}</div>\n              </div>\n              <div class="date">${localization[l][t.format("ddd")]+"<br>"+t.format(localization[l].date)}</div>\n            </div>`);else{if(8==T)break;document.querySelectorAll(".day > .pop")[T].innerHTML=`<img src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg" width="13px" height="13px" alt="Precip" class="pop_drop" crossorigin="anonymous">${Math.round(100*e.daily.data[T].precipProbability)}%`,document.querySelectorAll(".day > .sky")[T].src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${o}.svg`,document.querySelectorAll(".day > .sky")[T].alt=o,document.querySelectorAll(".day > .temp")[T].innerHTML=`\n          <div class="temp_max">\n            ${Math.round(e.daily.data[T].temperatureMax)}${localization[l].units[r].temp}</div>\n          <div class="temp_min">\n            ${Math.round(e.daily.data[T].temperatureMin)}${localization[l].units[r].temp}</div>\n          `,document.querySelectorAll(".date")[T].innerHTML=localization[l][t.format("ddd")]+"<br>"+t.format(localization[l].date)}null!=document.getElementsByClassName("weekday")[T]&&document.getElementsByClassName("weekday")[T].remove()}function z(){let e=document.createElement("div");e.className="backto",e.innerHTML=localization[l].curr,e.onclick=()=>{b(169-n)},window.matchMedia("(max-width: 550px)").matches?document.getElementsByClassName("day")[0].before(e):(document.getElementsByClassName("app_temp")[0].after(e),document.getElementById("other").style.marginTop="0",document.getElementById("details").style.marginTop="0")}function M(t){let o=e.daily.data[t].icon;"404: Something has gone wrong.."==e.daily.data[t].summary&&(e.daily.data[t].summary=e.daily.data[t].icon),"cloudy"==snowCheck(e.daily.data[t],"daily")?o="cloudy":snowCheck(e.daily.data[t],"daily")?("fog"==o&&(o="snow"),document.querySelector(".condition").innerHTML=fogToSnow(e.daily.data[t].summary,localStorage.lang)):document.querySelector(".condition").innerHTML=e.daily.data[t].summary,1==document.querySelectorAll(".date")[t].innerHTML.includes("<br>31.12")||1==document.querySelectorAll(".date")[t].innerHTML.includes("<br>12.31")?videoBack("NewYear",e):videoBack(o,e),document.getElementById("slide-item-1").checked="checked";let n=document.createElement("img");n.src=`https://d3aid59h00lu28.cloudfront.net/img/icons/${o}.svg`,n.crossOrigin="anonymous",n.alt=n,n.width="60px",n.height="60px",n.className="icon",document.querySelector(".temp_val").innerHTML=Math.round(e.daily.data[t].temperatureMax)+localization[l].units[r].temp,document.querySelector(".app_temp").innerHTML=localization[l].app_temp+" "+Math.round(e.daily.data[t].apparentTemperatureMax)+localization[l].units[r].temp,document.querySelector(".condition").prepend(n);let a=document.createElement("img");a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/water.svg",a.crossOrigin="anonymous",a.alt="",a.className="curr_icon",a.width="30px",a.height="30px",null==document.getElementsByClassName("backto")[0]||document.getElementsByClassName("backto")[0].remove(),z(),window.onresize=()=>{null!=document.getElementsByClassName("backto")[0]&&(document.getElementsByClassName("backto")[0].remove(),z())},document.querySelector(".propability").innerHTML=localization[l].pop+": "+Math.round(100*e.daily.data[t].precipProbability)+"%",document.querySelector(".propability").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/uv.svg",document.querySelector(".uv").innerHTML=localization[l].uvint+e.daily.data[t].uvIndex,document.querySelector(".uv").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/coverage.svg",document.querySelector(".clouds").innerHTML=localization[l].clouds+": "+Math.round(100*e.daily.data[t].cloudCover)+"%",document.querySelector(".clouds").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/wind.svg",document.querySelector(".wind_text > h3").innerHTML=localization[l].wind+": ",document.querySelector(".wind_text > h3").prepend(a),document.querySelector(".wind_speed").innerHTML=windIntensity(e.daily.data[t].windSpeed,l,r)+getCardinalDirection(e.daily.data[t].windBearing,localization[l].directions)+", "+e.daily.data[t].windSpeed+" "+localization[l].units[r].wind_units,d("daily",t),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/sunrise.svg",e.daily.data[0].sunriseTime===undefined?document.querySelector("#sunr").innerHTML=localization[l].undefined:document.querySelector("#sunr").innerHTML=localization[l].sunr+convertSeconds(e.daily.data[t].sunriseTime+3600*e.offset),document.querySelector("#sunr").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/sunset.svg",e.daily.data[0].sunsetTime===undefined?document.querySelector("#suns").innerHTML=localization[l].undefined:document.querySelector("#suns").innerHTML=localization[l].suns+convertSeconds(e.daily.data[t].sunsetTime+3600*e.offset),document.querySelector("#suns").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/pressure.svg",document.querySelector("#pres").innerHTML=localization[l].pres+e.daily.data[t].pressure+localization[l].units[r].pres_units,document.querySelector("#pres").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/humidity.svg",document.querySelector("#hum").innerHTML=localization[l].hum+": "+Math.round(100*e.daily.data[t].humidity)+"%",document.querySelector("#hum").prepend(a),a=a.cloneNode(!0),a.src="https://d3aid59h00lu28.cloudfront.net/img/icons/dewpoint.svg",document.querySelector("#dew").innerHTML=localization[l].dwp+": "+Math.round(e.daily.data[t].dewPoint)+localization[l].units[r].temp,document.querySelector("#dew").prepend(a),m(1e3*t),g("temperature","rgb(255, 81, 81)","rgba(255, 81, 81, 0.25)",localization[l].units[r].temp,1e3*t)}let k=document.getElementsByClassName("day");for(let l=0;l<k.length-1;l++)k[l].addEventListener("click",(()=>{M(8-o+l)}))}}else load_text[0].innerHTML=localization.ru.geo_error,load_text[1].innerHTML=localization.en.geo_error}load_text[0].innerHTML=localization.ru.loading,load_text[1].innerHTML=localization.en.loading,setTimeout((()=>{load_text[0]!=undefined&&(load_text[0].innerHTML=localization.ru.not_load,load_text[1].innerHTML=localization.en.not_load)}),5e3),window.onload=loaded(),document.getElementById("location").onclick=()=>{localStorage.removeItem("cached_data"),localStorage.location="on",loaded(localStorage)},document.getElementsByClassName("updating")[0].onclick=()=>{let e=localStorage.getItem("cached_data");e=JSON.parse(e);let t=[e[1].latitude,e[1].longitude];localStorage.removeItem("cached_data"),loaded(localStorage,t),document.getElementsByClassName("updating")[0].classList.toggle("updating_closed")},document.getElementsByClassName("updating_footer")[0].onclick=()=>{let e=localStorage.getItem("cached_data");e=JSON.parse(e);let t=[e[1].latitude,e[1].longitude];localStorage.removeItem("cached_data"),loaded(localStorage,t),0==document.getElementsByClassName("updating")[0].classList.contains("updating_closed")&&document.getElementsByClassName("updating")[0].classList.toggle("updating_closed")};